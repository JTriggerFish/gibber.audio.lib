const window={};let Gibberish=null;let initialized=false;(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Gibberish=e()}})(function(){var e,t,s;return function e(t,s,n){function i(r,o){if(!s[r]){if(!t[r]){var l=typeof require=="function"&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=s[r]={exports:{}};t[r][0].call(c.exports,function(e){var s=t[r][1][e];return i(s?s:e)},c,c.exports,e,t,s,n)}return s[r].exports}var a=typeof require=="function"&&require;for(var r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"abs",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({[this.name]:s?"Math.abs":Math.abs});e=`${i}abs( ${t[0]} )`}else{e=Math.abs(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];return t})},{"./gen.js":30}],2:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"accum",gen(){let e,t=n.getInputs(this),s="gen."+this.name,i;n.requestMemory(this.memory);n.memory.heap[this.memory.value.idx]=this.initialValue;i=this.callback(s,t[0],t[1],`memory[${this.memory.value.idx}]`);n.memo[this.name]=this.name+"_value";return[this.name+"_value",i]},callback(e,t,s,n){let i=this.max-this.min,a="",r="";if(!(typeof this.inputs[1]==="number"&&this.inputs[1]<1)){if(this.resetValue!==this.min){a+=`  if( ${s} >=1 ) ${n} = ${this.resetValue}\n\n`}else{a+=`  if( ${s} >=1 ) ${n} = ${this.min}\n\n`}}a+=`  var ${this.name}_value = ${n}\n`;if(this.shouldWrap===false&&this.shouldClamp===true){a+=`  if( ${n} < ${this.max} ) ${n} += ${t}\n`}else{a+=`  ${n} += ${t}\n`}if(this.max!==Infinity&&this.shouldWrapMax)r+=`  if( ${n} >= ${this.max} ) ${n} -= ${i}\n`;if(this.min!==-Infinity&&this.shouldWrapMin)r+=`  if( ${n} < ${this.min} ) ${n} += ${i}\n`;a=a+r+"\n";return a},defaults:{min:0,max:1,resetValue:0,initialValue:0,shouldWrap:true,shouldWrapMax:true,shouldWrapMin:true,shouldClamp:false}};t.exports=((e,t=0,s)=>{const a=Object.create(i);Object.assign(a,{uid:n.getUID(),inputs:[e,t],memory:{value:{length:1,idx:null}}},i.defaults,s);if(s!==undefined&&s.shouldWrapMax===undefined&&s.shouldWrapMin===undefined){if(s.shouldWrap!==undefined){a.shouldWrapMin=a.shouldWrapMax=s.shouldWrap}}if(s!==undefined&&s.resetValue===undefined){a.resetValue=a.min}if(a.initialValue===undefined)a.initialValue=a.min;Object.defineProperty(a,"value",{get(){return n.memory.heap[this.memory.value.idx]},set(e){n.memory.heap[this.memory.value.idx]=e}});a.name=`${a.basename}${a.uid}`;return a})},{"./gen.js":30}],3:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"acos",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({acos:s?"Math.acos":Math.acos});e=`${i}acos( ${t[0]} )`}else{e=Math.acos(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.id=n.getUID();t.name=`${t.basename}{acos.id}`;return t})},{"./gen.js":30}],4:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./mul.js"),a=e("./sub.js"),r=e("./div.js"),o=e("./data.js"),l=e("./peek.js"),u=e("./accum.js"),c=e("./ifelseif.js"),m=e("./lt.js"),d=e("./bang.js"),f=e("./env.js"),p=e("./add.js"),h=e("./poke.js"),g=e("./neq.js"),j=e("./and.js"),b=e("./gte.js"),y=e("./memo.js"),x=e("./utilities.js");t.exports=((e=44100,t=44100,s)=>{const i=Object.assign({},{shape:"exponential",alpha:5,trigger:null},s);const y=i.trigger!==null?i.trigger:d(),v=u(1,y,{min:0,max:Infinity,initialValue:-Infinity,shouldWrap:false});let $,_,k,w,O;let M=o([0]);if(i.shape==="linear"){w=c(j(b(v,0),m(v,e)),r(v,e),j(b(v,0),m(v,p(e,t))),a(1,r(a(v,e),t)),g(v,-Infinity),h(M,1,0,{inline:0}),0)}else{$=f({length:1024,type:i.shape,alpha:i.alpha});_=f({length:1024,type:i.shape,alpha:i.alpha,reverse:true});w=c(j(b(v,0),m(v,e)),l($,r(v,e),{boundmode:"clamp"}),j(b(v,0),m(v,p(e,t))),l(_,r(a(v,e),t),{boundmode:"clamp"}),g(v,-Infinity),h(M,1,0,{inline:0}),0)}const I=n.mode==="worklet";if(I===true){w.node=null;x.register(w)}w.isComplete=(()=>{if(I===true&&w.node!==null){const e=new Promise(e=>{w.node.getMemoryValue(M.memory.values.idx,e)});return e}else{return n.memory.heap[M.memory.values.idx]}});w.trigger=(()=>{if(I===true&&w.node!==null){w.node.port.postMessage({key:"set",idx:M.memory.values.idx,value:0})}else{n.memory.heap[M.memory.values.idx]=0}y.trigger()});return w})},{"./accum.js":2,"./add.js":5,"./and.js":7,"./bang.js":11,"./data.js":18,"./div.js":23,"./env.js":24,"./gen.js":30,"./gte.js":32,"./ifelseif.js":35,"./lt.js":38,"./memo.js":42,"./mul.js":48,"./neq.js":49,"./peek.js":54,"./poke.js":56,"./sub.js":66,"./utilities.js":72}],5:[function(e,t,s){"use strict";const n=e("./gen.js");const i={basename:"add",gen(){let e=n.getInputs(this),t="",s=0,i=0,a=false,r=true;if(e.length===0)return 0;t=`  var ${this.name} = `;e.forEach((n,o)=>{if(isNaN(n)){t+=n;if(o<e.length-1){a=true;t+=" + "}r=false}else{s+=parseFloat(n);i++}});if(i>0){t+=a||r?s:" + "+s}t+="\n";n.memo[this.name]=this.name;return[this.name,t]}};t.exports=((...e)=>{const t=Object.create(i);t.id=n.getUID();t.name=t.basename+t.id;t.inputs=e;return t})},{"./gen.js":30}],6:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./mul.js"),a=e("./sub.js"),r=e("./div.js"),o=e("./data.js"),l=e("./peek.js"),u=e("./accum.js"),c=e("./ifelseif.js"),m=e("./lt.js"),d=e("./bang.js"),f=e("./env.js"),p=e("./param.js"),h=e("./add.js"),g=e("./gtp.js"),j=e("./not.js"),b=e("./and.js"),y=e("./neq.js"),x=e("./poke.js");t.exports=((e=44,t=22050,s=44100,v=.6,$=44100,_)=>{let k=d(),w=u(1,k,{max:Infinity,shouldWrap:false,initialValue:Infinity}),O=p(1),M={shape:"exponential",alpha:5,triggerRelease:false},I=Object.assign({},M,_),N,P,S,q,D,U,A;const C=o([0]);N=f({length:1024,alpha:I.alpha,shift:0,type:I.shape});D=I.triggerRelease?O:m(w,h(e,t,s));U=I.triggerRelease?g(a(v,u(r(v,$),0,{shouldWrap:false})),0):a(v,i(r(a(w,h(e,t,s)),$),v)),A=I.triggerRelease?j(O):m(w,h(e,t,s,$));S=c(m(w,e),l(N,r(w,e),{boundmode:"clamp"}),m(w,h(e,t)),l(N,a(1,i(r(a(w,e),t),a(1,v))),{boundmode:"clamp"}),b(D,y(w,Infinity)),l(N,v),A,l(N,U,{boundmode:"clamp"}),y(w,Infinity),x(C,1,0,{inline:0}),0);const F=n.mode==="worklet";if(F===true){S.node=null;utilities.register(S)}S.trigger=(()=>{O.value=1;k.trigger()});S.isComplete=(()=>{if(F===true&&S.node!==null){const e=new Promise(e=>{S.node.getMemoryValue(C.memory.values.idx,e)});return e}else{return n.memory.heap[C.memory.values.idx]}});S.release=(()=>{O.value=0;if(F&&S.node!==null){console.log("worklet??");S.node.port.postMessage({key:"set",idx:U.inputs[0].inputs[1].memory.value.idx,value:0})}else{console.log("non-worklet...");n.memory.heap[U.inputs[0].inputs[1].memory.value.idx]=0}});return S})},{"./accum.js":2,"./add.js":5,"./and.js":7,"./bang.js":11,"./data.js":18,"./div.js":23,"./env.js":24,"./gen.js":30,"./gtp.js":33,"./ifelseif.js":35,"./lt.js":38,"./mul.js":48,"./neq.js":49,"./not.js":51,"./param.js":53,"./peek.js":54,"./poke.js":56,"./sub.js":66}],7:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"and",gen(){let e=n.getInputs(this),t;t=`  var ${this.name} = (${e[0]} !== 0 && ${e[1]} !== 0) | 0\n\n`;n.memo[this.name]=`${this.name}`;return[`${this.name}`,t]}};t.exports=((e,t)=>{let s=Object.create(i);Object.assign(s,{uid:n.getUID(),inputs:[e,t]});s.name=`${s.basename}${s.uid}`;return s})},{"./gen.js":30}],8:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"asin",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({asin:s?"Math.sin":Math.asin});e=`${i}asin( ${t[0]} )`}else{e=Math.asin(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.id=n.getUID();t.name=`${t.basename}{asin.id}`;return t})},{"./gen.js":30}],9:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"atan",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({atan:s?"Math.atan":Math.atan});e=`${i}atan( ${t[0]} )`}else{e=Math.atan(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.id=n.getUID();t.name=`${t.basename}{atan.id}`;return t})},{"./gen.js":30}],10:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./history.js"),a=e("./mul.js"),r=e("./sub.js");t.exports=((e=44100)=>{let t=i(1),s=Math.exp(-6.907755278921/e);t.in(a(t.out,s));t.out.trigger=(()=>{t.value=1});return r(1,t.out)})},{"./gen.js":30,"./history.js":34,"./mul.js":48,"./sub.js":66}],11:[function(e,t,s){"use strict";let n=e("./gen.js");let i={gen(){n.requestMemory(this.memory);let e=`  var ${this.name} = memory[${this.memory.value.idx}]\n  if( ${this.name} === 1 ) memory[${this.memory.value.idx}] = 0      \n      \n`;n.memo[this.name]=this.name;return[this.name,e]}};t.exports=(e=>{let t=Object.create(i),s=Object.assign({},{min:0,max:1},e);t.name="bang"+n.getUID();t.min=s.min;t.max=s.max;const a=n.mode==="worklet";if(a===true){t.node=null;utilities.register(t)}t.trigger=(()=>{if(a===true&&t.node!==null){t.node.port.postMessage({key:"set",idx:t.memory.value.idx,value:t.max})}else{n.memory.heap[t.memory.value.idx]=t.max}});t.memory={value:{length:1,idx:null}};return t})},{"./gen.js":30}],12:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"bool",gen(){let e=n.getInputs(this),t;t=`${e[0]} === 0 ? 0 : 1`;return t}};t.exports=(e=>{let t=Object.create(i);Object.assign(t,{uid:n.getUID(),inputs:[e]});t.name=`${t.basename}${t.uid}`;return t})},{"./gen.js":30}],13:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"ceil",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({[this.name]:s?"Math.ceil":Math.ceil});e=`${i}ceil( ${t[0]} )`}else{e=Math.ceil(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];return t})},{"./gen.js":30}],14:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./floor.js"),a=e("./sub.js"),r=e("./memo.js");let o={basename:"clip",gen(){let e,t=n.getInputs(this),s;s=` var ${this.name} = ${t[0]}\n  if( ${this.name} > ${t[2]} ) ${this.name} = ${t[2]}\n  else if( ${this.name} < ${t[1]} ) ${this.name} = ${t[1]}\n`;s=" "+s;n.memo[this.name]=this.name;return[this.name,s]}};t.exports=((e,t=-1,s=1)=>{let i=Object.create(o);Object.assign(i,{min:t,max:s,uid:n.getUID(),inputs:[e,t,s]});i.name=`${i.basename}${i.uid}`;return i})},{"./floor.js":27,"./gen.js":30,"./memo.js":42,"./sub.js":66}],15:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"cos",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({cos:s?"Math.cos":Math.cos});e=`${i}cos( ${t[0]} )`}else{e=Math.cos(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.id=n.getUID();t.name=`${t.basename}{cos.id}`;return t})},{"./gen.js":30}],16:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"counter",gen(){let e,t=n.getInputs(this),s="gen."+this.name,i;if(this.memory.value.idx===null)n.requestMemory(this.memory);i=this.callback(s,t[0],t[1],t[2],t[3],t[4],`memory[${this.memory.value.idx}]`,`memory[${this.memory.wrap.idx}]`);n.memo[this.name]=this.name+"_value";if(n.memo[this.wrap.name]===undefined)this.wrap.gen();return[this.name+"_value",i]},callback(e,t,s,n,i,a,r,o){let l=this.max-this.min,u="",c="";if(!(typeof this.inputs[3]==="number"&&this.inputs[3]<1)){u+=`  if( ${i} >= 1 ) ${r} = ${s}\n`}u+=`  var ${this.name}_value = ${r};\n  ${r} += ${t}\n`;if(typeof this.max==="number"&&this.max!==Infinity&&typeof this.min!=="number"){c=`  if( ${r} >= ${this.max} &&  ${a} > 0) {\n    ${r} -= ${l}\n    ${o} = 1\n  }else{\n    ${o} = 0\n  }\n`}else if(this.max!==Infinity&&this.min!==Infinity){c=`  if( ${r} >= ${n} &&  ${a} > 0) {\n    ${r} -= ${n} - ${s}\n    ${o} = 1\n  }else if( ${r} < ${s} &&  ${a} > 0) {\n    ${r} += ${n} - ${s}\n    ${o} = 1\n  }else{\n    ${o} = 0\n  }\n`}else{u+="\n"}u=u+c;return u}};t.exports=((e=1,t=0,s=Infinity,a=0,r=1,o)=>{let l=Object.create(i),u={initialValue:0,shouldWrap:true};if(o!==undefined)Object.assign(u,o);Object.assign(l,{min:t,max:s,value:u.initialValue,uid:n.getUID(),inputs:[e,t,s,a,r],memory:{value:{length:1,idx:null},wrap:{length:1,idx:null}},wrap:{gen(){if(l.memory.wrap.idx===null){n.requestMemory(l.memory)}n.getInputs(this);n.memo[this.name]=`memory[ ${l.memory.wrap.idx} ]`;return`memory[ ${l.memory.wrap.idx} ]`}}},u);Object.defineProperty(l,"value",{get(){if(this.memory.value.idx!==null){return n.memory.heap[this.memory.value.idx]}},set(e){if(this.memory.value.idx!==null){n.memory.heap[this.memory.value.idx]=e}}});l.wrap.inputs=[l];l.name=`${l.basename}${l.uid}`;l.wrap.name=l.name+"_wrap";return l})},{"./gen.js":30}],17:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./phasor.js"),a=e("./data.js"),r=e("./peek.js"),o=e("./mul.js"),l=e("./phasor.js");let u={basename:"cycle",initTable(){let e=new Float32Array(1024);for(let t=0,s=e.length;t<s;t++){e[t]=Math.sin(t/s*(Math.PI*2))}n.globals.cycle=a(e,1,{immutable:true})}};t.exports=((e=1,t=0,s)=>{if(typeof n.globals.cycle==="undefined")u.initTable();const i=Object.assign({},{min:0},s);const a=r(n.globals.cycle,l(e,t,i));a.name="cycle"+n.getUID();return a})},{"./data.js":18,"./gen.js":30,"./mul.js":48,"./peek.js":54,"./phasor.js":55}],18:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./utilities.js"),a=e("./peek.js"),r=e("./poke.js");let o={basename:"data",globals:{},gen(){let e;if(n.memo[this.name]===undefined){let t=this;n.requestMemory(this.memory,this.immutable);e=this.memory.values.idx;try{n.memory.heap.set(this.buffer,e)}catch(e){console.log(e);throw Error("error with request. asking for "+this.buffer.length+". current index: "+n.memoryIndex+" of "+n.memory.heap.length)}n.memo[this.name]=e}else{e=n.memo[this.name]}return e}};t.exports=((e,t=1,s)=>{let l,u,c=false;if(s!==undefined&&s.global!==undefined){if(n.globals[s.global]){return n.globals[s.global]}}if(typeof e==="number"){if(t!==1){u=[];for(let s=0;s<t;s++){u[s]=new Float32Array(e)}}else{u=new Float32Array(e)}}else if(Array.isArray(e)){let t=e.length;u=new Float32Array(t);for(let t=0;t<e.length;t++){u[t]=e[t]}}else if(typeof e==="string"){u={length:t>1?t:n.samplerate*60};c=true}else if(e instanceof Float32Array){u=e}l=Object.create(o);Object.assign(l,{buffer:u,name:o.basename+n.getUID(),dim:u.length,channels:1,onload:null,then(e){l.onload=e;return l},immutable:s!==undefined&&s.immutable===true?true:false,load(e){let t=i.loadSample(e,l);t.then(e=>{l.memory.values.length=l.dim=e.length;l.onload()})},memory:{values:{length:u.length,idx:null}}});if(c)l.load(e);if(s!==undefined){if(s.global!==undefined){n.globals[s.global]=l}if(s.meta===true){for(let e=0,t=l.buffer.length;e<t;e++){Object.defineProperty(l,e,{get(){return a(l,e,{mode:"simple",interp:"none"})},set(t){return r(l,t,e)}})}}}return l})},{"./gen.js":30,"./peek.js":54,"./poke.js":56,"./utilities.js":72}],19:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./history.js"),a=e("./sub.js"),r=e("./add.js"),o=e("./mul.js"),l=e("./memo.js");t.exports=(e=>{let t=i(),s=i(),n;n=l(r(a(e,t.out),o(s.out,.9997)));t.in(e);s.in(n);return n})},{"./add.js":5,"./gen.js":30,"./history.js":34,"./memo.js":42,"./mul.js":48,"./sub.js":66}],20:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./history.js"),a=e("./mul.js"),r=e("./t60.js");t.exports=((e=44100,t)=>{let s=Object.assign({},{initValue:1},t),n=i(s.initValue);n.in(a(n.out,r(e)));n.out.trigger=(()=>{n.value=1});return n.out})},{"./gen.js":30,"./history.js":34,"./mul.js":48,"./t60.js":68}],21:[function(e,t,s){"use strict";const n=e("./gen.js"),i=e("./data.js"),a=e("./poke.js"),r=e("./peek.js"),o=e("./sub.js"),l=e("./wrap.js"),u=e("./accum.js"),c=e("./memo.js");const m={basename:"delay",gen(){let e=n.getInputs(this);n.memo[this.name]=e[0];return e[0]}};const d={size:512,interp:"none"};t.exports=((e,t,s)=>{const c=Object.create(m);let f,p,h;if(Array.isArray(t)===false)t=[t];const g=Object.assign({},d,s);const j=Math.max(...t);if(g.size<j)g.size=j;h=i(g.size);c.inputs=[];f=u(1,0,{max:g.size,min:0});for(let e=0;e<t.length;e++){c.inputs[e]=r(h,l(o(f,t[e]),0,g.size),{mode:"samples",interp:g.interp})}c.outputs=c.inputs;a(h,e,f);c.name=`${c.basename}${n.getUID()}`;return c})},{"./accum.js":2,"./data.js":18,"./gen.js":30,"./memo.js":42,"./peek.js":54,"./poke.js":56,"./sub.js":66,"./wrap.js":74}],22:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./history.js"),a=e("./sub.js");t.exports=(e=>{let t=i();t.in(e);let s=a(e,t.out);s.name="delta"+n.getUID();return s})},{"./gen.js":30,"./history.js":34,"./sub.js":66}],23:[function(e,t,s){"use strict";let n=e("./gen.js");const i={basename:"div",gen(){let e=n.getInputs(this),t=`  var ${this.name} = `,s=0,i=0,a=e[0],r=isNaN(a),o=false;e.forEach((s,n)=>{if(n===0)return;let i=isNaN(s),o=n===e.length-1;if(!r&&!i){a=a/s;t+=a}else{t+=`${a} / ${s}`}if(!o)t+=" / "});t+="\n";n.memo[this.name]=this.name;return[this.name,t]}};t.exports=((...e)=>{const t=Object.create(i);Object.assign(t,{id:n.getUID(),inputs:e});t.name=t.basename+t.id;return t})},{"./gen.js":30}],24:[function(e,t,s){"use strict";let n=e("./gen"),i=e("./windows"),a=e("./data"),r=e("./peek"),o=e("./phasor"),l={type:"triangular",length:1024,alpha:.15,shift:0,reverse:false};t.exports=(e=>{let t=Object.assign({},l,e);let s=new Float32Array(t.length);let r=t.type+"_"+t.length+"_"+t.shift+"_"+t.reverse+"_"+t.alpha;if(typeof n.globals.windows[r]==="undefined"){for(let e=0;e<t.length;e++){s[e]=i[t.type](t.length,e,t.alpha,t.shift)}if(t.reverse===true){s.reverse()}n.globals.windows[r]=a(s)}let o=n.globals.windows[r];o.name="env"+n.getUID();return o})},{"./data":18,"./gen":30,"./peek":54,"./phasor":55,"./windows":73}],25:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"eq",gen(){let e=n.getInputs(this),t;t=this.inputs[0]===this.inputs[1]?1:`  var ${this.name} = (${e[0]} === ${e[1]}) | 0\n\n`;n.memo[this.name]=`${this.name}`;return[`${this.name}`,t]}};t.exports=((e,t)=>{let s=Object.create(i);Object.assign(s,{uid:n.getUID(),inputs:[e,t]});s.name=`${s.basename}${s.uid}`;return s})},{"./gen.js":30}],26:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"exp",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({[this.name]:s?"Math.exp":Math.exp});e=`${i}exp( ${t[0]} )`}else{e=Math.exp(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];return t})},{"./gen.js":30}],27:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"floor",gen(){let e,t=n.getInputs(this);if(isNaN(t[0])){e=`( ${t[0]} | 0 )`}else{e=t[0]|0}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];return t})},{"./gen.js":30}],28:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"fold",gen(){let e,t=n.getInputs(this),s;s=this.createCallback(t[0],this.min,this.max);n.memo[this.name]=this.name+"_value";return[this.name+"_value",s]},createCallback(e,t,s){let n=` var ${this.name}_value = ${e},\n      ${this.name}_range = ${s} - ${t},\n      ${this.name}_numWraps = 0\n\n  if(${this.name}_value >= ${s}){\n    ${this.name}_value -= ${this.name}_range\n    if(${this.name}_value >= ${s}){\n      ${this.name}_numWraps = ((${this.name}_value - ${t}) / ${this.name}_range) | 0\n      ${this.name}_value -= ${this.name}_range * ${this.name}_numWraps\n    }\n    ${this.name}_numWraps++\n  } else if(${this.name}_value < ${t}){\n    ${this.name}_value += ${this.name}_range\n    if(${this.name}_value < ${t}){\n      ${this.name}_numWraps = ((${this.name}_value - ${t}) / ${this.name}_range- 1) | 0\n      ${this.name}_value -= ${this.name}_range * ${this.name}_numWraps\n    }\n    ${this.name}_numWraps--\n  }\n  if(${this.name}_numWraps & 1) ${this.name}_value = ${s} + ${t} - ${this.name}_value\n`;return" "+n}};t.exports=((e,t=0,s=1)=>{let a=Object.create(i);Object.assign(a,{min:t,max:s,uid:n.getUID(),inputs:[e]});a.name=`${a.basename}${a.uid}`;return a})},{"./gen.js":30}],29:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"gate",controlString:null,gen(){let e=n.getInputs(this),t;n.requestMemory(this.memory);let s="memory[ "+this.memory.lastInput.idx+" ]",i=this.memory.lastInput.idx+1,a=e[0],r=e[1];t=` if( ${r} !== ${s} ) {\n    memory[ ${s} + ${i}  ] = 0 \n    ${s} = ${r}\n  }\n  memory[ ${i} + ${r} ] = ${a}\n\n`;this.controlString=e[1];this.initialized=true;n.memo[this.name]=this.name;this.outputs.forEach(e=>e.gen());return[null," "+t]},childgen(){if(this.parent.initialized===false){n.getInputs(this)}if(n.memo[this.name]===undefined){n.requestMemory(this.memory);n.memo[this.name]=`memory[ ${this.memory.value.idx} ]`}return`memory[ ${this.memory.value.idx} ]`}};t.exports=((e,t,s)=>{let a=Object.create(i),r={count:2};if(typeof s!==undefined)Object.assign(r,s);Object.assign(a,{outputs:[],uid:n.getUID(),inputs:[t,e],memory:{lastInput:{length:1,idx:null}},initialized:false},r);a.name=`${a.basename}${n.getUID()}`;for(let e=0;e<a.count;e++){a.outputs.push({index:e,gen:i.childgen,parent:a,inputs:[a],memory:{value:{length:1,idx:null}},initialized:false,name:`${a.name}_out${n.getUID()}`})}return a})},{"./gen.js":30}],30:[function(e,t,s){"use strict";let n=e("memory-helper");let i={accum:0,getUID(){return this.accum++},debug:false,samplerate:44100,shouldLocalize:false,globals:{windows:{}},mode:"worklet",closures:new Set,params:new Set,inputs:new Set,parameters:new Set,endBlock:new Set,histories:new Map,memo:{},export(e){},addToEndBlock(e){this.endBlock.add("  "+e)},requestMemory(e,t=false){for(let s in e){let n=e[s];if(n.length===undefined){console.log("undefined length for:",s);continue}n.idx=i.memory.alloc(n.length,t)}},createMemory(e,t){const s=n.create(s,t)},createCallback(e,t,s=false,i=false,a=Float64Array){let r=Array.isArray(e)&&e.length>1,o,l,u;if(typeof t==="number"||t===undefined){t=n.create(t,a)}this.memory=t;this.outputIdx=this.memory.alloc(2,true);this.memo={};this.endBlock.clear();this.closures.clear();this.inputs.clear();this.params.clear();this.parameters.clear();this.functionBody="  'use strict'\n";if(i===false){this.functionBody+=this.mode==="worklet"?"  var memory = this.memory\n\n":"  var memory = gen.memory\n\n"}for(let t=0;t<1+r;t++){if(typeof e[t]==="number")continue;let s=r?this.getInput(e[t]):this.getInput(e),n="";n+=Array.isArray(s)?s[1]+"\n"+s[0]:s;n=n.split("\n");if(n[n.length-1].trim().indexOf("let")>-1){n.push("\n")}let i=n.length-1;n[i]="  memory["+(this.outputIdx+t)+"]  = "+n[i]+"\n";this.functionBody+=n.join("\n")}this.histories.forEach(e=>{if(e!==null)e.gen()});const c=r?`  return [ memory[${this.outputIdx}], memory[${this.outputIdx+1}] ]`:`  return memory[${this.outputIdx}]`;this.functionBody=this.functionBody.split("\n");if(this.endBlock.size){this.functionBody=this.functionBody.concat(Array.from(this.endBlock));this.functionBody.push(c)}else{this.functionBody.push(c)}this.functionBody=this.functionBody.join("\n");if(i===true){this.parameters.add("memory")}let m="";if(this.mode==="worklet"){for(let e of this.parameters.values()){m+=e+","}m=m.slice(0,-1)}const d=this.parameters.size!==0&&this.inputs.size>0?", ":"";let f="";if(this.mode==="worklet"){for(let e of this.inputs.values()){f+=e.name+","}f=f.slice(0,-1)}let p=this.mode==="worklet"?`return function( ${f} ${d} ${m} ){ \n${this.functionBody}\n}`:`return function gen( ${[...this.parameters].join(",")} ){ \n${this.functionBody}\n}`;if(this.debug||s)console.log(p);o=new Function(p)();for(let e of this.closures.values()){let t=Object.keys(e)[0],s=e[t];o[t]=s}for(let e of this.params.values()){let t=Object.keys(e)[0],s=e[t];Object.defineProperty(o,t,{configurable:true,get(){return s.value},set(e){s.value=e}})}o.members=this.closures;o.data=this.data;o.params=this.params;o.inputs=this.inputs;o.parameters=this.parameters;o.isStereo=r;o.memory=this.memory.heap;this.histories.clear();return o},getInputs(e){return e.inputs.map(i.getInput)},getInput(e){let t=typeof e==="object",s;if(t){if(i.memo[e.name]){s=i.memo[e.name]}else if(Array.isArray(e)){i.getInput(e[0]);i.getInput(e[1])}else{if(typeof e.gen!=="function"){console.log("no gen found:",e,e.gen)}let t=e.gen();if(Array.isArray(t)){if(!i.shouldLocalize){i.functionBody+=t[1]}else{i.codeName=t[0];i.localizedCode.push(t[1])}s=t[0]}else{s=t}}}else{s=e}return s},startLocalize(){this.localizedCode=[];this.shouldLocalize=true},endLocalize(){this.shouldLocalize=false;return[this.codeName,this.localizedCode.slice(0)]},free(e){if(Array.isArray(e)){for(let t of e){this.free(t)}}else{if(typeof e==="object"){if(e.memory!==undefined){for(let t in e.memory){this.memory.free(e.memory[t].idx)}}if(Array.isArray(e.inputs)){for(let t of e.inputs){this.free(t)}}}}}};t.exports=i},{"memory-helper":141}],31:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"gt",gen(){let e,t=n.getInputs(this);e=`  var ${this.name} = `;if(isNaN(this.inputs[0])||isNaN(this.inputs[1])){e+=`(( ${t[0]} > ${t[1]}) | 0 )`}else{e+=t[0]>t[1]?1:0}e+="\n\n";n.memo[this.name]=this.name;return[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];s.name=s.basename+n.getUID();return s})},{"./gen.js":30}],32:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"gte",gen(){let e,t=n.getInputs(this);e=`  var ${this.name} = `;if(isNaN(this.inputs[0])||isNaN(this.inputs[1])){e+=`( ${t[0]} >= ${t[1]} | 0 )`}else{e+=t[0]>=t[1]?1:0}e+="\n\n";n.memo[this.name]=this.name;return[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];s.name="gte"+n.getUID();return s})},{"./gen.js":30}],33:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"gtp",gen(){let e,t=n.getInputs(this);if(isNaN(this.inputs[0])||isNaN(this.inputs[1])){e=`(${t[0]} * ( ( ${t[0]} > ${t[1]} ) | 0 ) )`}else{e=t[0]*(t[0]>t[1]|0)}return e}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];return s})},{"./gen.js":30}],34:[function(e,t,s){"use strict";let n=e("./gen.js");t.exports=((e=0)=>{let t={inputs:[e],memory:{value:{length:1,idx:null}},recorder:null,in(s){if(n.histories.has(s)){let e=n.histories.get(s);t.name=e.name;return e}let i={gen(){let a=n.getInputs(t);if(t.memory.value.idx===null){n.requestMemory(t.memory);n.memory.heap[t.memory.value.idx]=e}let r=t.memory.value.idx;n.addToEndBlock("memory[ "+r+" ] = "+a[0]);n.histories.set(s,i);return a[0]},name:t.name+"_in"+n.getUID(),memory:t.memory};this.inputs[0]=s;t.recorder=i;return i},out:{gen(){if(t.memory.value.idx===null){if(n.histories.get(t.inputs[0])===undefined){n.histories.set(t.inputs[0],t.recorder)}n.requestMemory(t.memory);n.memory.heap[t.memory.value.idx]=parseFloat(e)}let s=t.memory.value.idx;return"memory[ "+s+" ] "}},uid:n.getUID()};t.out.memory=t.memory;t.name="history"+t.uid;t.out.name=t.name+"_out";t.in._name=t.name="_in";Object.defineProperty(t,"value",{get(){if(this.memory.value.idx!==null){return n.memory.heap[this.memory.value.idx]}},set(e){if(this.memory.value.idx!==null){n.memory.heap[this.memory.value.idx]=e}}});return t})},{"./gen.js":30}],35:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"ifelse",gen(){let e=this.inputs[0],t=n.getInput(e[e.length-1]),s=`  var ${this.name}_out = ${t}\n`;for(let t=0;t<e.length-2;t+=2){let i=t===e.length-3,a=n.getInput(e[t]),r=e[t+1],o,l,u;if(typeof r==="number"){o=r;l=null}else{if(n.memo[r.name]===undefined){n.startLocalize();n.getInput(r);o=n.endLocalize();l=o[0];o=o[1].join("");o="  "+o.replace(/\n/gi,"\n  ")}else{o="";l=n.memo[r.name]}}u=l===null?`  ${this.name}_out = ${o}`:`${o}  ${this.name}_out = ${l}`;if(t===0)s+=" ";s+=` if( ${a} === 1 ) {\n${u}\n  }`;if(!i){s+=` else`}else{s+=`\n`}}n.memo[this.name]=`${this.name}_out`;return[`${this.name}_out`,s]}};t.exports=((...e)=>{let t=Object.create(i),s=Array.isArray(e[0])?e[0]:e;Object.assign(t,{uid:n.getUID(),inputs:[s]});t.name=`${t.basename}${t.uid}`;return t})},{"./gen.js":30}],36:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"in",gen(){const e=n.mode==="worklet";if(e){n.inputs.add(this)}else{n.parameters.add(this.name)}n.memo[this.name]=e?this.name+"[i]":this.name;return this.name}};t.exports=((e,t=0,s=0,a=0,r=0,o=1)=>{let l=Object.create(i);l.id=n.getUID();l.name=e!==undefined?e:`${l.basename}${l.id}`;Object.assign(l,{defaultValue:a,min:r,max:o,inputNumber:t,channelNumber:s});l[0]={gen(){if(!n.parameters.has(l.name))n.parameters.add(l.name);return l.name+"[0]"}};l[1]={gen(){if(!n.parameters.has(l.name))n.parameters.add(l.name);return l.name+"[1]"}};return l})},{"./gen.js":30}],37:[function(e,t,s){"use strict";const n={export(e){if(e===window){e.ssd=n.history;e.input=n.in;e.ternary=n.switch;delete n.history;delete n.in;delete n.switch}Object.assign(e,n);Object.defineProperty(n,"samplerate",{get(){return n.gen.samplerate},set(e){}});n.in=e.input;n.history=e.ssd;n.switch=e.ternary;e.clip=n.clamp},gen:e("./gen.js"),abs:e("./abs.js"),round:e("./round.js"),param:e("./param.js"),add:e("./add.js"),sub:e("./sub.js"),mul:e("./mul.js"),div:e("./div.js"),accum:e("./accum.js"),counter:e("./counter.js"),sin:e("./sin.js"),cos:e("./cos.js"),tan:e("./tan.js"),tanh:e("./tanh.js"),asin:e("./asin.js"),acos:e("./acos.js"),atan:e("./atan.js"),phasor:e("./phasor.js"),data:e("./data.js"),peek:e("./peek.js"),cycle:e("./cycle.js"),history:e("./history.js"),delta:e("./delta.js"),floor:e("./floor.js"),ceil:e("./ceil.js"),min:e("./min.js"),max:e("./max.js"),sign:e("./sign.js"),dcblock:e("./dcblock.js"),memo:e("./memo.js"),rate:e("./rate.js"),wrap:e("./wrap.js"),mix:e("./mix.js"),clamp:e("./clamp.js"),poke:e("./poke.js"),delay:e("./delay.js"),fold:e("./fold.js"),mod:e("./mod.js"),sah:e("./sah.js"),noise:e("./noise.js"),not:e("./not.js"),gt:e("./gt.js"),gte:e("./gte.js"),lt:e("./lt.js"),lte:e("./lte.js"),bool:e("./bool.js"),gate:e("./gate.js"),train:e("./train.js"),slide:e("./slide.js"),in:e("./in.js"),t60:e("./t60.js"),mtof:e("./mtof.js"),ltp:e("./ltp.js"),gtp:e("./gtp.js"),switch:e("./switch.js"),mstosamps:e("./mstosamps.js"),selector:e("./selector.js"),utilities:e("./utilities.js"),pow:e("./pow.js"),attack:e("./attack.js"),decay:e("./decay.js"),windows:e("./windows.js"),env:e("./env.js"),ad:e("./ad.js"),adsr:e("./adsr.js"),ifelse:e("./ifelseif.js"),bang:e("./bang.js"),and:e("./and.js"),pan:e("./pan.js"),eq:e("./eq.js"),neq:e("./neq.js"),exp:e("./exp.js"),seq:e("./seq.js")};n.gen.lib=n;t.exports=n},{"./abs.js":1,"./accum.js":2,"./acos.js":3,"./ad.js":4,"./add.js":5,"./adsr.js":6,"./and.js":7,"./asin.js":8,"./atan.js":9,"./attack.js":10,"./bang.js":11,"./bool.js":12,"./ceil.js":13,"./clamp.js":14,"./cos.js":15,"./counter.js":16,"./cycle.js":17,"./data.js":18,"./dcblock.js":19,"./decay.js":20,"./delay.js":21,"./delta.js":22,"./div.js":23,"./env.js":24,"./eq.js":25,"./exp.js":26,"./floor.js":27,"./fold.js":28,"./gate.js":29,"./gen.js":30,"./gt.js":31,"./gte.js":32,"./gtp.js":33,"./history.js":34,"./ifelseif.js":35,"./in.js":36,"./lt.js":38,"./lte.js":39,"./ltp.js":40,"./max.js":41,"./memo.js":42,"./min.js":43,"./mix.js":44,"./mod.js":45,"./mstosamps.js":46,"./mtof.js":47,"./mul.js":48,"./neq.js":49,"./noise.js":50,"./not.js":51,"./pan.js":52,"./param.js":53,"./peek.js":54,"./phasor.js":55,"./poke.js":56,"./pow.js":57,"./rate.js":58,"./round.js":59,"./sah.js":60,"./selector.js":61,"./seq.js":62,"./sign.js":63,"./sin.js":64,"./slide.js":65,"./sub.js":66,"./switch.js":67,"./t60.js":68,"./tan.js":69,"./tanh.js":70,"./train.js":71,"./utilities.js":72,"./windows.js":73,"./wrap.js":74}],38:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"lt",gen(){let e,t=n.getInputs(this);e=`  var ${this.name} = `;if(isNaN(this.inputs[0])||isNaN(this.inputs[1])){e+=`(( ${t[0]} < ${t[1]}) | 0  )`}else{e+=t[0]<t[1]?1:0}e+="\n";n.memo[this.name]=this.name;return[this.name,e];return e}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];s.name=s.basename+n.getUID();return s})},{"./gen.js":30}],39:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"lte",gen(){let e,t=n.getInputs(this);e=`  var ${this.name} = `;if(isNaN(this.inputs[0])||isNaN(this.inputs[1])){e+=`( ${t[0]} <= ${t[1]} | 0  )`}else{e+=t[0]<=t[1]?1:0}e+="\n";n.memo[this.name]=this.name;return[this.name,e];return e}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];s.name="lte"+n.getUID();return s})},{"./gen.js":30}],40:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"ltp",gen(){let e,t=n.getInputs(this);if(isNaN(this.inputs[0])||isNaN(this.inputs[1])){e=`(${t[0]} * (( ${t[0]} < ${t[1]} ) | 0 ) )`}else{e=t[0]*(t[0]<t[1]|0)}return e}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];return s})},{"./gen.js":30}],41:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"max",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])||isNaN(t[1])){n.closures.add({[this.name]:s?"Math.max":Math.max});e=`${i}max( ${t[0]}, ${t[1]} )`}else{e=Math.max(parseFloat(t[0]),parseFloat(t[1]))}return e}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];return s})},{"./gen.js":30}],42:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"memo",gen(){let e,t=n.getInputs(this);e=`  var ${this.name} = ${t[0]}\n`;n.memo[this.name]=this.name;return[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e];s.id=n.getUID();s.name=t!==undefined?t+"_"+n.getUID():`${s.basename}${s.id}`;return s})},{"./gen.js":30}],43:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"min",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])||isNaN(t[1])){n.closures.add({[this.name]:s?"Math.min":Math.min});e=`${i}min( ${t[0]}, ${t[1]} )`}else{e=Math.min(parseFloat(t[0]),parseFloat(t[1]))}return e}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];return s})},{"./gen.js":30}],44:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./add.js"),a=e("./mul.js"),r=e("./sub.js"),o=e("./memo.js");t.exports=((e,t,s=.5)=>{let l=o(i(a(e,r(1,s)),a(t,s)));l.name="mix"+n.getUID();return l})},{"./add.js":5,"./gen.js":30,"./memo.js":42,"./mul.js":48,"./sub.js":66}],45:[function(e,t,s){"use strict";let n=e("./gen.js");t.exports=((...e)=>{let t={id:n.getUID(),inputs:e,gen(){let e=n.getInputs(this),t="(",s=0,i=0,a=e[0],r=isNaN(a),o=false;e.forEach((s,n)=>{if(n===0)return;let i=isNaN(s),o=n===e.length-1;if(!r&&!i){a=a%s;t+=a}else{t+=`${a} % ${s}`}if(!o)t+=" % "});t+=")";return t}};return t})},{"./gen.js":30}],46:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"mstosamps",gen(){let e,t=n.getInputs(this),s;if(isNaN(t[0])){e=`  var ${this.name} = ${n.samplerate} / 1000 * ${t[0]} \n\n`;n.memo[this.name]=e;s=[this.name,e]}else{e=n.samplerate/1e3*this.inputs[0];s=e}return s}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.name=i.basename+n.getUID();return t})},{"./gen.js":30}],47:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"mtof",gen(){let e,t=n.getInputs(this);if(isNaN(t[0])){n.closures.add({[this.name]:Math.exp});e=`( ${this.tuning} * gen.exp( .057762265 * (${t[0]} - 69) ) )`}else{e=this.tuning*Math.exp(.057762265*(t[0]-69))}return e}};t.exports=((e,t)=>{let s=Object.create(i),n={tuning:440};if(t!==undefined)Object.assign(t.defaults);Object.assign(s,n);s.inputs=[e];return s})},{"./gen.js":30}],48:[function(e,t,s){"use strict";const n=e("./gen.js");const i={basename:"mul",gen(){let e=n.getInputs(this),t=`  var ${this.name} = `,s=1,i=0,a=false,r=true;e.forEach((n,o)=>{if(isNaN(n)){t+=n;if(o<e.length-1){a=true;t+=" * "}r=false}else{if(o===0){s=n}else{s*=parseFloat(n)}i++}});if(i>0){t+=a||r?s:" * "+s}t+="\n";n.memo[this.name]=this.name;return[this.name,t]}};t.exports=((...e)=>{const t=Object.create(i);Object.assign(t,{id:n.getUID(),inputs:e});t.name=t.basename+t.id;return t})},{"./gen.js":30}],49:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"neq",gen(){let e=n.getInputs(this),t;t=`  var ${this.name} = (${e[0]} !== ${e[1]}) | 0\n\n`;n.memo[this.name]=this.name;return[this.name,t]}};t.exports=((e,t)=>{let s=Object.create(i);Object.assign(s,{uid:n.getUID(),inputs:[e,t]});s.name=`${s.basename}${s.uid}`;return s})},{"./gen.js":30}],50:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"noise",gen(){let e;const t=n.mode==="worklet";const s=t?"":"gen.";n.closures.add({noise:t?"Math.random":Math.random});e=`  var ${this.name} = ${s}noise()\n`;n.memo[this.name]=this.name;return[this.name,e]}};t.exports=(e=>{let t=Object.create(i);t.name=i.name+n.getUID();return t})},{"./gen.js":30}],51:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"not",gen(){let e,t=n.getInputs(this);if(isNaN(this.inputs[0])){e=`( ${t[0]} === 0 ? 1 : 0 )`}else{e=!t[0]===0?1:0}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];return t})},{"./gen.js":30}],52:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./data.js"),a=e("./peek.js"),r=e("./mul.js");let o={basename:"pan",initTable(){let e=new Float32Array(1024),t=new Float32Array(1024);const s=Math.PI/180;for(let n=0;n<1024;n++){let i=n*(90/1024);e[n]=Math.cos(i*s);t[n]=Math.sin(i*s)}n.globals.panL=i(e,1,{immutable:true});n.globals.panR=i(t,1,{immutable:true})}};t.exports=((e,t,s=.5,i)=>{if(n.globals.panL===undefined)o.initTable();let l=Object.create(o);Object.assign(l,{uid:n.getUID(),inputs:[e,t],left:r(e,a(n.globals.panL,s,{boundmode:"clamp"})),right:r(t,a(n.globals.panR,s,{boundmode:"clamp"}))});l.name=`${l.basename}${l.uid}`;return l})},{"./data.js":18,"./gen.js":30,"./mul.js":48,"./peek.js":54}],53:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"param",gen(){n.requestMemory(this.memory);n.params.add(this);const e=n.mode==="worklet";if(e)n.parameters.add(this.name);this.value=this.initialValue;n.memo[this.name]=e?this.name+"[i]":`memory[${this.memory.value.idx}]`;return n.memo[this.name]}};t.exports=((e=0,t=0,s=0,a=1)=>{let r=Object.create(i);if(typeof e!=="string"){r.name=r.basename+n.getUID();r.initialValue=e}else{r.name=e;r.initialValue=t}r.min=s;r.max=a;r.waapi=null;r.isWorklet=n.mode==="worklet";Object.defineProperty(r,"value",{get(){if(this.memory.value.idx!==null){return n.memory.heap[this.memory.value.idx]}},set(e){if(this.memory.value.idx!==null){if(this.isWorklet&&this.waapi!==null){this.waapi.value=e}else{n.memory.heap[this.memory.value.idx]=e}}}});r.memory={value:{length:1,idx:null}};return r})},{"./gen.js":30}],54:[function(e,t,s){"use strict";const n=e("./gen.js"),i=e("./data.js");let a={basename:"peek",gen(){let e="gen."+this.name,t=n.getInputs(this),s,i,a,r,o;o=t[1];r=(Math.log2(this.data.buffer.length)|0)===Math.log2(this.data.buffer.length);if(this.mode!=="simple"){i=`  var ${this.name}_dataIdx  = ${o}, \n      ${this.name}_phase = ${this.mode==="samples"?t[0]:t[0]+" * "+this.data.buffer.length}, \n      ${this.name}_index = ${this.name}_phase | 0,\n`;if(this.boundmode==="wrap"){a=r?`( ${this.name}_index + 1 ) & (${this.data.buffer.length} - 1)`:`${this.name}_index + 1 >= ${this.data.buffer.length} ? ${this.name}_index + 1 - ${this.data.buffer.length} : ${this.name}_index + 1`}else if(this.boundmode==="clamp"){a=`${this.name}_index + 1 >= ${this.data.buffer.length-1} ? ${this.data.buffer.length-1} : ${this.name}_index + 1`}else if(this.boundmode==="fold"||this.boundmode==="mirror"){a=`${this.name}_index + 1 >= ${this.data.buffer.length-1} ? ${this.name}_index - ${this.data.buffer.length-1} : ${this.name}_index + 1`}else{a=`${this.name}_index + 1`}if(this.interp==="linear"){i+=`      ${this.name}_frac  = ${this.name}_phase - ${this.name}_index,\n      ${this.name}_base  = memory[ ${this.name}_dataIdx +  ${this.name}_index ],\n      ${this.name}_next  = ${a},`;if(this.boundmode==="ignore"){i+=`\n      ${this.name}_out   = ${this.name}_index >= ${this.data.buffer.length-1} || ${this.name}_index < 0 ? 0 : ${this.name}_base + ${this.name}_frac * ( memory[ ${this.name}_dataIdx + ${this.name}_next ] - ${this.name}_base )\n\n`}else{i+=`\n      ${this.name}_out   = ${this.name}_base + ${this.name}_frac * ( memory[ ${this.name}_dataIdx + ${this.name}_next ] - ${this.name}_base )\n\n`}}else{i+=`      ${this.name}_out = memory[ ${this.name}_dataIdx + ${this.name}_index ]\n\n`}}else{i=`memory[ ${o} + ${t[0]} ]`;return i}n.memo[this.name]=this.name+"_out";return[this.name+"_out",i]},defaults:{channels:1,mode:"phase",interp:"linear",boundmode:"wrap"}};t.exports=((e,t=0,s)=>{let i=Object.create(a);const r=typeof e.basename==="undefined"?n.lib.data(e):e;Object.assign(i,{data:r,dataName:r.name,uid:n.getUID(),inputs:[t,r]},a.defaults,s);i.name=i.basename+i.uid;return i})},{"./data.js":18,"./gen.js":30}],55:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./accum.js"),a=e("./mul.js"),r={basename:"phasor"},o=e("./div.js");const l={min:-1,max:1};t.exports=((e=1,t=0,s)=>{const u=Object.assign({},l,s);const c=u.max-u.min;const m=typeof e==="number"?i(e*c/n.samplerate,t,u):i(o(a(e,c),n.samplerate),t,u);m.name=r.basename+n.getUID();return m})},{"./accum.js":2,"./div.js":23,"./gen.js":30,"./mul.js":48}],56:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./mul.js"),a=e("./wrap.js");let r={basename:"poke",gen(){let e="memory",t=n.getInputs(this),s,i,a;s=this.data.gen();let r=this.inputs[1]===0?`  ${e}[ ${s} ] = ${t[0]}\n`:`  ${e}[ ${s} + ${t[1]} ] = ${t[0]}\n`;if(this.inline===undefined){n.functionBody+=r}else{return[this.inline,r]}}};t.exports=((e,t,s,i)=>{let a=Object.create(r),o={channels:1};if(i!==undefined)Object.assign(o,i);Object.assign(a,{data:e,dataName:e.name,dataLength:e.buffer.length,uid:n.getUID(),inputs:[t,s]},o);a.name=a.basename+a.uid;n.histories.set(a.name,a);return a})},{"./gen.js":30,"./mul.js":48,"./wrap.js":74}],57:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"pow",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])||isNaN(t[1])){n.closures.add({pow:s?"Math.pow":Math.pow});e=`${i}pow( ${t[0]}, ${t[1]} )`}else{if(typeof t[0]==="string"&&t[0][0]==="("){t[0]=t[0].slice(1,-1)}if(typeof t[1]==="string"&&t[1][0]==="("){t[1]=t[1].slice(1,-1)}e=Math.pow(parseFloat(t[0]),parseFloat(t[1]))}return e}};t.exports=((e,t)=>{let s=Object.create(i);s.inputs=[e,t];s.id=n.getUID();s.name=`${s.basename}{pow.id}`;return s})},{"./gen.js":30}],58:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./history.js"),a=e("./sub.js"),r=e("./add.js"),o=e("./mul.js"),l=e("./memo.js"),u=e("./delta.js"),c=e("./wrap.js");let m={basename:"rate",gen(){let e=n.getInputs(this),t=i(),s=i(),a="gen."+this.name,r,o,l;n.closures.add({[this.name]:this});l=` var ${this.name}_diff = ${e[0]} - ${a}.lastSample\n  if( ${this.name}_diff < -.5 ) ${this.name}_diff += 1\n  ${a}.phase += ${this.name}_diff * ${e[1]}\n  if( ${a}.phase > 1 ) ${a}.phase -= 1\n  ${a}.lastSample = ${e[0]}\n`;l=" "+l;return[a+".phase",l]}};t.exports=((e,t)=>{let s=Object.create(m);Object.assign(s,{phase:0,lastSample:0,uid:n.getUID(),inputs:[e,t]});s.name=`${s.basename}${s.uid}`;return s})},{"./add.js":5,"./delta.js":22,"./gen.js":30,"./history.js":34,"./memo.js":42,"./mul.js":48,"./sub.js":66,"./wrap.js":74}],59:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"round",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({[this.name]:s?"Math.round":Math.round});e=`${i}round( ${t[0]} )`}else{e=Math.round(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];return t})},{"./gen.js":30}],60:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"sah",gen(){let e=n.getInputs(this),t;n.requestMemory(this.memory);t=` var ${this.name}_control = memory[${this.memory.control.idx}],\n      ${this.name}_trigger = ${e[1]} > ${e[2]} ? 1 : 0\n\n  if( ${this.name}_trigger !== ${this.name}_control  ) {\n    if( ${this.name}_trigger === 1 ) \n      memory[${this.memory.value.idx}] = ${e[0]}\n    \n    memory[${this.memory.control.idx}] = ${this.name}_trigger\n  }\n`;n.memo[this.name]=`memory[${this.memory.value.idx}]`;return[`memory[${this.memory.value.idx}]`," "+t]}};t.exports=((e,t,s=0,a)=>{let r=Object.create(i),o={init:0};if(a!==undefined)Object.assign(o,a);Object.assign(r,{lastSample:0,uid:n.getUID(),inputs:[e,t,s],memory:{control:{idx:null,length:1},value:{idx:null,length:1}}},o);r.name=`${r.basename}${r.uid}`;return r})},{"./gen.js":30}],61:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"selector",gen(){let e=n.getInputs(this),t,s=0;switch(e.length){case 2:s=e[1];break;case 3:t=`  var ${this.name}_out = ${e[0]} === 1 ? ${e[1]} : ${e[2]}\n\n`;s=[this.name+"_out",t];break;default:t=` var ${this.name}_out = 0\n  switch( ${e[0]} + 1 ) {\n`;for(let s=1;s<e.length;s++){t+=`    case ${s}: ${this.name}_out = ${e[s]}; break;\n`}t+="  }\n\n";s=[this.name+"_out"," "+t]}n.memo[this.name]=this.name+"_out";return s}};t.exports=((...e)=>{let t=Object.create(i);Object.assign(t,{uid:n.getUID(),inputs:e});t.name=`${t.basename}${t.uid}`;return t})},{"./gen.js":30}],62:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./accum.js"),a=e("./counter.js"),r=e("./peek.js"),o=e("./history.js"),l=e("./data.js"),u={basename:"seq"};t.exports=((e=11025,t=[0,1],s=1)=>{let c;if(Array.isArray(e)){const t=a(0,0,e.length);const n=r(l(e),t,{mode:"simple"});c=a(s,0,n);const i=o();i.in(c.wrap);t.inputs[0]=i.out}else{c=a(s,0,e)}const m=i(c.wrap,0,{min:0,max:t.length});const d=r(l(t),m,{mode:"simple"});d.name=u.basename+n.getUID();return d})},{"./accum.js":2,"./counter.js":16,"./data.js":18,"./gen.js":30,"./history.js":34,"./peek.js":54}],63:[function(e,t,s){"use strict";let n=e("./gen.js");let i={name:"sign",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({[this.name]:s?"Math.sign":Math.sign});e=`${i}sign( ${t[0]} )`}else{e=Math.sign(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];return t})},{"./gen.js":30}],64:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"sin",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({sin:s?"Math.sin":Math.sin});e=`${i}sin( ${t[0]} )`}else{e=Math.sin(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.id=n.getUID();t.name=`${t.basename}{sin.id}`;return t})},{"./gen.js":30}],65:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./history.js"),a=e("./sub.js"),r=e("./add.js"),o=e("./mul.js"),l=e("./memo.js"),u=e("./gt.js"),c=e("./div.js"),m=e("./switch.js");t.exports=((e,t=1,s=1)=>{let n=i(0),o,d;d=m(u(e,n.out),t,s);o=l(r(n.out,c(a(e,n.out),d)));n.in(o);return o})},{"./add.js":5,"./div.js":23,"./gen.js":30,"./gt.js":31,"./history.js":34,"./memo.js":42,"./mul.js":48,"./sub.js":66,"./switch.js":67}],66:[function(e,t,s){"use strict";const n=e("./gen.js");const i={basename:"sub",gen(){let e=n.getInputs(this),t=0,s=0,i=false,a=0,r=e[0],o=isNaN(r),l=false,u=false,c=0;this.inputs.forEach(e=>{if(isNaN(e))u=true});t="  var "+this.name+" = ";e.forEach((s,n)=>{if(n===0)return;let a=isNaN(s),l=n===e.length-1;if(!o&&!a){r=r-s;t+=r;return}else{i=true;t+=`${r} - ${s}`}if(!l)t+=" - "});t+="\n";c=[this.name,t];n.memo[this.name]=this.name;return c}};t.exports=((...e)=>{let t=Object.create(i);Object.assign(t,{id:n.getUID(),inputs:e});t.name="sub"+t.id;return t})},{"./gen.js":30}],67:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"switch",gen(){let e=n.getInputs(this),t;if(e[1]===e[2])return e[1];t=`  var ${this.name}_out = ${e[0]} === 1 ? ${e[1]} : ${e[2]}\n`;n.memo[this.name]=`${this.name}_out`;return[`${this.name}_out`,t]}};t.exports=((e,t=1,s=0)=>{let a=Object.create(i);Object.assign(a,{uid:n.getUID(),inputs:[e,t,s]});a.name=`${a.basename}${a.uid}`;return a})},{"./gen.js":30}],68:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"t60",gen(){let e,t=n.getInputs(this),s;const i=n.mode==="worklet";const a=i?"":"gen.";if(isNaN(t[0])){n.closures.add({["exp"]:i?"Math.exp":Math.exp});e=`  var ${this.name} = ${a}exp( -6.907755278921 / ${t[0]} )\n\n`;n.memo[this.name]=e;s=[this.name,e]}else{e=Math.exp(-6.907755278921/t[0]);s=e}return s}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.name=i.basename+n.getUID();return t})},{"./gen.js":30}],69:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"tan",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({tan:s?"Math.tan":Math.tan});e=`${i}tan( ${t[0]} )`}else{e=Math.tan(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.id=n.getUID();t.name=`${t.basename}{tan.id}`;return t})},{"./gen.js":30}],70:[function(e,t,s){"use strict";let n=e("./gen.js");let i={basename:"tanh",gen(){let e,t=n.getInputs(this);const s=n.mode==="worklet";const i=s?"":"gen.";if(isNaN(t[0])){n.closures.add({tanh:s?"Math.tan":Math.tanh});e=`${i}tanh( ${t[0]} )`}else{e=Math.tanh(parseFloat(t[0]))}return e}};t.exports=(e=>{let t=Object.create(i);t.inputs=[e];t.id=n.getUID();t.name=`${t.basename}{tanh.id}`;return t})},{"./gen.js":30}],71:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./lt.js"),a=e("./phasor.js");t.exports=((e=440,t=.5)=>{let s=i(accum(div(e,44100)),.5);s.name=`train${n.getUID()}`;return s})},{"./gen.js":30,"./lt.js":38,"./phasor.js":55}],72:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./data.js");let a=false;let r={ctx:null,clear(){if(this.workletNode!==undefined){this.workletNode.disconnect()}else{this.callback=(()=>0)}this.clear.callbacks.forEach(e=>e());this.clear.callbacks.length=0},createContext(){let e=typeof AudioContext==="undefined"?webkitAudioContext:AudioContext;this.ctx=new e;n.samplerate=this.ctx.sampleRate;let t=()=>{if(typeof e!=="undefined"){if(document&&document.documentElement&&"ontouchstart"in document.documentElement){window.removeEventListener("touchstart",t);if("ontouchstart"in document.documentElement){let e=r.ctx.createBufferSource();e.connect(r.ctx.destination);e.noteOn(0)}}}};if(document&&document.documentElement&&"ontouchstart"in document.documentElement){window.addEventListener("touchstart",t)}return this},createScriptProcessor(){this.node=this.ctx.createScriptProcessor(1024,0,2);this.clearFunction=function(){return 0};if(typeof this.callback==="undefined")this.callback=this.clearFunction;this.node.onaudioprocess=function(e){var t=e.outputBuffer;var s=t.getChannelData(0),n=t.getChannelData(1),i=r.isStereo;for(var a=0;a<s.length;a++){var o=r.callback();if(i===false){s[a]=n[a]=o}else{s[a]=o[0];n[a]=o[1]}}};this.node.connect(this.ctx.destination);return this},prettyPrintCallback(e){const t=e.toString().split("\n");const s=t.slice(3,-2);const n=s.map(e=>"      "+e);return n.join("\n")},createParameterDescriptors(e){let t="";for(let s of e.inputs.values()){t+=`{ name:'${s.name}', defaultValue:${s.defaultValue}, minValue:${s.min}, maxValue:${s.max} },\n      `}return t},createParameterDereferences(e){let t=e.params.size>0?"\n      ":"";for(let s of e.params.values()){t+=`const ${s.name} = parameters.${s.name}\n      `}return t},createParameterArguments(e){let t="";for(let s of e.params.values()){t+=s.name+"[i],"}t=t.slice(0,-1);return t},createInputDereferences(e){let t=e.inputs.size>0?"\n":"";for(let s of e.inputs.values()){t+=`const ${s.name} = inputs[ ${s.inputNumber} ][ ${s.channelNumber} ]\n      `}return t},createInputArguments(e){let t="";for(let s of e.inputs.values()){t+=s.name+"[i],"}t=t.slice(0,-1);return t},createFunctionDereferences(e){let t=e.members.size>0?"\n":"";let s={};for(let n of e.members.values()){const e=Object.keys(n)[0],i=n[e];if(s[e]!==undefined)continue;s[e]=true;t+=`      const ${e} = ${i}\n`}return t},createWorkletProcessor(e,t,s,i=44100*10){const a=n.createCallback(e,i,s);const r=a.inputs;const o=this.createParameterDescriptors(a);const l=this.createParameterDereferences(a);const u=this.createParameterArguments(a);const c=this.createInputDereferences(a);const m=this.createInputArguments(a);const d=this.createFunctionDereferences(a);const f=a.isStereo===false?`left[ i ] = memory[0]`:`left[ i ] = memory[0];\n\t\tright[ i ] = memory[1]\n`;const p=this.prettyPrintCallback(a);const h=`\nclass ${t}Processor extends AudioWorkletProcessor {\n\n  static get parameterDescriptors() {\n    const params = [\n      ${o}      \n    ]\n    return params\n  }\n \n  constructor( options ) {\n    super( options )\n    this.port.onmessage = this.handleMessage.bind( this )\n    this.initialized = false\n  }\n\n  handleMessage( event ) {\n    if( event.data.key === 'init' ) {\n      this.memory = event.data.memory\n      this.initialized = true\n    }else if( event.data.key === 'set' ) {\n      this.memory[ event.data.idx ] = event.data.value\n    }else if( event.data.key === 'get' ) {\n      this.port.postMessage({ key:'return', idx:event.data.idx, value:this.memory[event.data.idx] })     \n    }\n  }\n\n  process( inputs, outputs, parameters ) {\n    if( this.initialized === true ) {\n      const output = outputs[0]\n      const left   = output[ 0 ]\n      const right  = output[ 1 ]\n      const len    = left.length\n      const memory = this.memory ${l}${c}${d}\n\n      for( let i = 0; i < len; ++i ) {\n        ${p}\n        ${f}\n      }\n    }\n    return true\n  }\n}\n    \nregisterProcessor( '${t}', ${t}Processor)`;if(s===true)console.log(h);const g=window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}));return[g,h,r,a.params,a.isStereo]},registeredForNodeAssignment:[],register(e){if(this.registeredForNodeAssignment.indexOf(e)===-1){this.registeredForNodeAssignment.push(e)}},playWorklet(e,t,s=false,i=44100*10){r.clear();const[a,o,l,u,c]=r.createWorkletProcessor(e,t,s,i);const m=new Promise((e,s)=>{r.ctx.audioWorklet.addModule(a).then(()=>{const s=new AudioWorkletNode(r.ctx,t,{outputChannelCount:[c?2:1]});s.connect(r.ctx.destination);s.callbacks={};s.onmessage=function(e){if(e.data.message==="return"){s.callbacks[e.data.idx](e.data.value);delete s.callbacks[e.data.idx]}};s.getMemoryValue=function(e,t){this.workletCallbacks[e]=t;this.workletNode.port.postMessage({key:"get",idx:e})};s.port.postMessage({key:"init",memory:n.memory.heap});r.workletNode=s;r.registeredForNodeAssignment.forEach(e=>e.node=s);r.registeredForNodeAssignment.length=0;for(let e of l.values()){const t=Object.keys(e)[0];const n=s.parameters.get(t);Object.defineProperty(s,t,{set(e){n.value=e},get(){return n.value}})}for(let e of u.values()){const t=e.name;const n=s.parameters.get(t);e.waapi=n;Object.defineProperty(s,t,{set(e){n.value=e},get(){return n.value}})}if(r.console)r.console.setValue(o);e(s)})});return m},playGraph(e,t,s=44100*10,i=Float32Array){r.clear();if(t===undefined)t=false;this.isStereo=Array.isArray(e);r.callback=n.createCallback(e,s,t,false,i);if(r.console)r.console.setValue(r.callback.toString());return r.callback},loadSample(e,t){let s=new XMLHttpRequest;s.open("GET",e,true);s.responseType="arraybuffer";let n=new Promise((e,n)=>{s.onload=function(){var n=s.response;r.ctx.decodeAudioData(n,s=>{t.buffer=s.getChannelData(0);e(t.buffer)})}});s.send();return n}};r.clear.callbacks=[];t.exports=r},{"./data.js":18,"./gen.js":30}],73:[function(e,t,s){"use strict";const n=t.exports={bartlett(e,t){return 2/(e-1)*((e-1)/2-Math.abs(t-(e-1)/2))},bartlettHann(e,t){return.62-.48*Math.abs(t/(e-1)-.5)-.38*Math.cos(2*Math.PI*t/(e-1))},blackman(e,t,s){let n=(1-s)/2,i=.5,a=s/2;return n-i*Math.cos(2*Math.PI*t/(e-1))+a*Math.cos(4*Math.PI*t/(e-1))},cosine(e,t){return Math.cos(Math.PI*t/(e-1)-Math.PI/2)},gauss(e,t,s){return Math.pow(Math.E,-.5*Math.pow((t-(e-1)/2)/(s*(e-1)/2),2))},hamming(e,t){return.54-.46*Math.cos(Math.PI*2*t/(e-1))},hann(e,t){return.5*(1-Math.cos(Math.PI*2*t/(e-1)))},lanczos(e,t){let s=2*t/(e-1)-1;return Math.sin(Math.PI*s)/(Math.PI*s)},rectangular(e,t){return 1},triangular(e,t){return 2/e*(e/2-Math.abs(t-(e-1)/2))},welch(e,t,s,n=0){const i=n===0?t:(t+Math.floor(n*e))%e;const a=(e-1)/2;return 1-Math.pow((i-a)/a,2)},inversewelch(e,t,s,n=0){let i=n===0?t:(t+Math.floor(n*e))%e;const a=(e-1)/2;return Math.pow((i-a)/a,2)},parabola(e,t){if(t<=e/2){return n.inversewelch(e/2,t)-1}else{return 1-n.inversewelch(e/2,t-e/2)}},exponential(e,t,s){return Math.pow(t/e,s)},linear(e,t){return t/e}}},{}],74:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./floor.js"),a=e("./sub.js"),r=e("./memo.js");let o={basename:"wrap",gen(){let e,t=n.getInputs(this),s=t[0],i=t[1],a=t[2],r,o;if(this.min===0){o=a}else if(isNaN(a)||isNaN(i)){o=`${a} - ${i}`}else{o=a-i}r=` var ${this.name} = ${t[0]}\n  if( ${this.name} < ${this.min} ) ${this.name} += ${o}\n  else if( ${this.name} > ${this.max} ) ${this.name} -= ${o}\n\n`;return[this.name," "+r]}};t.exports=((e,t=0,s=1)=>{let i=Object.create(o);Object.assign(i,{min:t,max:s,uid:n.getUID(),inputs:[e,t,s]});i.name=`${i.basename}${i.uid}`;return i})},{"./floor.js":27,"./gen.js":30,"./memo.js":42,"./sub.js":66}],75:[function(e,t,s){let n=e("../ugen.js");let i=Object.create(n);Object.assign(i,{__type__:"analyzer"});t.exports=i},{"../ugen.js":135}],76:[function(e,t,s){t.exports=function(t){const s={SSD:e("./singlesampledelay.js")(t),Follow:e("./follow.js")(t)};s.export=(e=>{for(let t in s){if(t!=="export"){e[t]=s[t]}}});return s}},{"./follow.js":77,"./singlesampledelay.js":78}],77:[function(e,t,s){const n=e("genish.js"),i=e("./analyzer.js"),a=e("../ugen.js");const r=n;t.exports=function(e){const t=s=>{const o=Object.create(i);o.in=Object.create(a);o.id=e.factory.getUID();const l=Object.assign({},s,t.defaults);let u=l.input.isStereo!==undefined?l.input.isStereo:true;o.buffer=n.data(l.bufferSize,1);let c;const m=n.in("input");const d=u?n.add(m[0],m[1]):m;{"use jsdsp";const e=n.accum(1,0,{max:l.bufferSize,min:0});const t=n.data(1,1,{meta:true});t[0]=r.sub(r.add(t[0],d),n.peek(o.buffer,e,{mode:"simple"}));c=r.div(t[0],l.bufferSize)}if(!u){e.factory(o,c,"follow_out",l);o.callback.ugenName=o.ugenName=`follow_out_${o.id}`;let t=o.buffer.memory.values.idx;let s=0;let n=Math.abs;let i=function(e,i){"use strict";i[r.add(t,s)]=n(e);s++;if(s>r.sub(l.bufferSize,1)){s=0}return 0};e.factory(o.in,d,"follow_in",l,i);o.in.callback.ugenName=o.in.ugenName=`follow_in_${o.id}`;o.in.inputNames=["input"];o.in.inputs=[d];o.in.input=l.input;o.in.type="analysis";if(e.analyzers.indexOf(o.in)===-1){e.analyzers.push(o.in)}e.dirty(e.analyzers)}return o};t.defaults={bufferSize:8192};return t}},{"../ugen.js":135,"./analyzer.js":75,"genish.js":37}],78:[function(e,t,s){const n=e("genish.js"),i=e("./analyzer.js"),a=e("../workletProxy.js"),r=e("../ugen.js");t.exports=function(e){const t=s=>{let o=Object.create(i);o.__in=Object.create(r);o.__out=Object.create(r);o.id=e.factory.getUID();let l=Object.assign({},t.defaults,s);let u=l.isStereo;let c=n.in("input");let m=n.history();if(u){let t=n.history();e.factory(o.__out,[m.out,t.out],"ssd_out",l,null,false);o.__out.callback.ugenName=o.__out.ugenName="ssd_out"+o.id;const s=o.__out.graph.memory.value.idx,i=s+1,a=e.genish.gen.memory.heap;const r=function(e){"use strict";a[s]=e[0];a[i]=e[1];return 0};e.factory(o.in,[c[0],c[1]],"ssd_in",l,r,false);r.ugenName=o.in.ugenName="ssd_in_"+o.id;o.in.inputNames=["input"];o.in.inputs=[l.input];o.in.input=l.input;o.type="analysis";o.in.listen=function(t){if(t!==undefined){o.in.input=t;o.in.inputs=[t]}if(e.analyzers.indexOf(o.in)===-1){e.analyzers.push(o.in)}e.dirty(e.analyzers)}}else{e.factory(o.__out,m.out,"ssd_out",l,null,false);o.__out.callback.ugenName=o.__out.ugenName="ssd_out"+o.id;let t=o.__out.graph.memory.value.idx;let s=e.genish.gen.memory.heap;let n=function(e){"use strict";s[t]=e;return 0};e.factory(o.__in,c,"ssd_in",{},n,false);n.ugenName=o.__in.ugenName="ssd_in_"+o.id;o.__in.inputNames=["input"];o.__in.inputs=[l.input];o.__in.input=l.input;o.type="analysis";o.__in.listen=function(t){if(t!==undefined){o.__in.input=t;o.__in.inputs=[t]}if(e.analyzers.indexOf(o.__in)===-1){if(e.mode==="worklet"){e.analyzers.push({id:o.id,prop:"in"})}else{e.analyzers.push(o.__in)}}e.dirty(e.analyzers)}}o.listen=o.__in.listen;o.__in.type="analysis";o.__out.inputs=[];const d=a(["analysis","SSD"],l,o);Object.defineProperties(d,{out:{set(e){},get(){if(e.mode==="worklet"){return{id:d.id,prop:"out"}}else{return d.__out}}}});return d};t.defaults={input:0,isStereo:false};return t}},{"../ugen.js":135,"../workletProxy.js":138,"./analyzer.js":75,"genish.js":37}],79:[function(e,t,s){const n=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(s){const a=Object.create(n),r=i.in("attack"),o=i.in("decay");const l=Object.assign({},t.defaults,s);const u=i.ad(r,o,{shape:l.shape,alpha:l.alpha});a.trigger=u.trigger;const c=e.factory(a,u,["envelopes","AD"],l);return c};t.defaults={attack:44100,decay:44100,shape:"exponential",alpha:5};return t}},{"../ugen.js":135,"genish.js":37}],80:[function(e,t,s){const n=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(s){const a=Object.create(n),r=i.in("attack"),o=i.in("decay"),l=i.in("sustain"),u=i.in("release"),c=i.in("sustainLevel");const m=Object.assign({},t.defaults,s);Object.assign(a,m);const d=i.adsr(r,o,l,c,u,{triggerRelease:m.triggerRelease,shape:m.shape,alpha:m.alpha});a.trigger=d.trigger;a.advance=d.release;const f=e.factory(a,d,["envelopes","ADSR"],m);return f};t.defaults={attack:22050,decay:22050,sustain:44100,sustainLevel:.6,release:44100,triggerRelease:false,shape:"exponential",alpha:5};return t}},{"../ugen.js":135,"genish.js":37}],81:[function(e,t,s){const n=e("genish.js");t.exports=function(t){const s={AD:e("./ad.js")(t),ADSR:e("./adsr.js")(t),Ramp:e("./ramp.js")(t),export:e=>{for(let t in s){if(t!=="export"&&t!=="factory"){e[t]=s[t]}}},factory(e,t,s,i,a,r,o,l=false){let u;if(e!=true){u=n.ad(s,i,{shape:t})}else{u=n.adsr(s,i,a,r,o,{shape:t,triggerRelease:l})}return u}};return s}},{"./ad.js":79,"./adsr.js":80,"./ramp.js":82,"genish.js":37}],82:[function(e,t,s){const n=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(s){const a=Object.create(n),r=i.in("length"),o=i.in("from"),l=i.in("to");const u=Object.assign({},t.defaults,s);const c=i.bang();const m=i.accum(i.div(1,r),c,{shouldWrap:u.shouldLoop,shouldClamp:true}),d=i.sub(l,o),f=i.add(o,i.mul(m,d));a.trigger=c.trigger;const p=e.factory(a,f,["envelopes","ramp"],u);return p};t.defaults={from:0,to:1,length:i.gen.samplerate,shouldLoop:false};return t}},{"../ugen.js":135,"genish.js":37}],83:[function(e,t,s){let n=function(e){this.cmp=e||function(e,t){return e-t};this.length=0;this.data=[]};n.prototype.peek=function(){return this.data[0]};n.prototype.push=function(e){this.data.push(e);var t=this.data.length-1,s,n;while(t>0){s=t-1>>>1;if(this.cmp(this.data[t],this.data[s])<0){n=this.data[s];this.data[s]=this.data[t];this.data[t]=n;t=s}else break}return this.length++};n.prototype.pop=function(){var e=this.data.pop(),t=this.data[0];if(this.data.length>0){this.data[0]=e;var s=0,n=this.data.length-1,i,a,r,o;while(1){i=(s<<1)+1;a=i+1;r=s;if(i<=n&&this.cmp(this.data[i],this.data[r])<0)r=i;if(a<=n&&this.cmp(this.data[a],this.data[r])<0)r=a;if(r!==s){o=this.data[r];this.data[r]=this.data[s];this.data[s]=o;s=r}else break}}else{t=e}this.length--;return t};t.exports=n},{}],84:[function(e,t,s){let n=e("genish.js");let i=function(e,t=500,s=.5){let i=n.counter(1,0,t),a=n.data(t),r=n.peek(a,i,{interp:"none",mode:"samples"}),o=n.memo(n.add(n.mul(-1,e),r));n.poke(a,n.add(e,n.mul(r,s)),i);return o};t.exports=i},{"genish.js":37}],85:[function(e,t,s){let n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.biquad=((e,t,s,i,a)=>{let r,o,l,u,c,m,d,f,p,h,g,j,b,y,x,v;let $;const _=n.memo(n.add(.5,n.mul(s,22)));let k=n.history(),w=n.history(),O=n.history(),M=n.history();let I=n.memo(n.mul(2*Math.PI,n.div(t,n.gen.samplerate))),N=n.sin(I),P=n.cos(I),S=n.memo(n.div(N,n.mul(2,_)));let q=n.sub(1,P);switch(i){case 1:r=n.memo(n.div(n.add(1,P),2));o=n.mul(n.add(1,P),-1);l=r;u=n.add(1,S);c=n.mul(-2,P);m=n.sub(1,S);break;case 2:r=n.mul(_,S);o=0;l=n.mul(r,-1);u=n.add(1,S);c=n.mul(-2,P);m=n.sub(1,S);break;default:r=n.memo(n.div(q,2));o=q;l=r;u=n.add(1,S);c=n.mul(-2,P);m=n.sub(1,S)}r=n.div(r,u);o=n.div(o,u);l=n.div(l,u);c=n.div(c,u);m=n.div(m,u);d=n.mul(k.in(a?e[0]:e),r);f=n.mul(w.in(k.out),o);p=n.mul(w.out,l);let D=n.add(d,f,p);h=n.mul(M.in(O.out),c);g=n.mul(M.out,m);let U=n.add(h,g);let A=n.sub(D,U);O.in(A);if(a){let t=n.history(),s=n.history(),i=n.history(),a=n.history();j=n.mul(t.in(e[1]),r);b=n.mul(s.in(t.out),o);y=n.mul(s.out,l);let u=n.add(j,b,y);x=n.mul(a.in(i.out),c);v=n.mul(a.out,m);let d=n.add(x,v);let f=n.sub(u,d);i.in(f);$=[A,f]}else{$=A}return $});let t=s=>{let a=Object.create(i);let r=Object.assign({},t.defaults,s);Object.assign(a,r);let o=a.input.isStereo;a.__createGraph=function(){a.graph=e.genish.biquad(n.in("input"),n.mul(n.in("cutoff"),n.gen.samplerate/4),n.in("Q"),a.mode,o)};a.__createGraph();a.__requiresRecompilation=["mode"];const l=e.factory(a,a.graph,["filters","Filter12Biquad"],r);return l};t.defaults={input:0,Q:.15,cutoff:.05,mode:0};return t}},{"./filter.js":88,"genish.js":37}],86:[function(e,t,s){let n=e("genish.js");let i=function(e,t,s=.5*.4,i=.84){let a=n.history(),r=n.counter(1,0,t),o=n.data(t),l=n.peek(o,r,{interp:"none",mode:"samples"}),u=n.memo(n.add(n.mul(l,n.sub(1,s)),n.mul(a.out,s)));a.in(u);n.poke(o,n.add(e,n.mul(u,i)),r);return l};t.exports=i},{"genish.js":37}],87:[function(e,t,s){const n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.diodeZDF=((e,t,s,i,a=false)=>{const r=1/n.gen.samplerate,o=n.history(0),l=n.history(0),u=n.history(0),c=n.history(0);let m=1,d=.5,f=.5,p=.5,h=0;const g=n.memo(n.add(.5,n.mul(t,11)));const j=n.memo(n.mul(Math.PI*2,s));const b=n.memo(n.mul(2/r,n.tan(n.mul(j,r/2))));const y=n.memo(n.mul(b,r/2));const x=n.memo(n.mul(.5,n.div(y,n.add(1,y))));const v=n.memo(n.mul(.5,n.div(y,n.sub(n.add(1,y),n.mul(n.mul(.5,y),x)))));const $=n.memo(n.mul(.5,n.div(y,n.sub(n.add(1,y),n.mul(n.mul(.5,y),v)))));const _=n.memo(n.div(y,n.sub(n.add(1,y),n.mul(y,$))));const k=n.memo(n.mul(n.mul(x,v),n.mul($,_)));const w=n.memo(n.mul(n.mul(x,v),$));const O=n.memo(n.mul(x,v));const M=x;let I=1;const N=n.memo(n.div(y,n.add(1,y)));const P=n.memo(n.div(1,n.sub(n.add(1,y),n.mul(y,$))));const S=n.memo(n.div(1,n.sub(n.add(1,y),n.mul(n.mul(.5,y),v))));const q=n.memo(n.div(1,n.sub(n.add(1,y),n.mul(n.mul(.5,y),x))));const D=n.memo(n.div(1,n.add(1,y)));const U=n.memo(n.add(1,n.mul(_,$)));const A=n.memo(n.add(1,n.mul($,v)));const C=n.memo(n.add(1,n.mul(v,x)));const F=y;const z=n.memo(n.mul(.5,y));const R=n.memo(n.mul(.5,y));const G=$;const E=v;const W=x;const V=s;const B=n.memo(n.mul(D,c.out));const L=n.memo(n.mul(q,n.add(u.out,n.mul(B,R))));const T=n.memo(n.mul(S,n.add(l.out,n.mul(L,z))));const Q=n.memo(n.mul(P,n.add(o.out,n.mul(T,F))));const Z=n.memo(n.mul(S,n.add(l.out,n.mul(L,z))));const J=n.memo(n.mul(q,n.add(u.out,n.mul(B,R))));const H=B;const K=n.memo(n.add(n.add(n.mul(w,Q),n.mul(O,Z)),n.add(n.mul(M,J),n.mul(I,H))));let X=e;X=n.tanh(n.mul(i,X));const Y=n.div(n.sub(X,n.mul(g,K)),n.add(1,n.mul(g,k)));let ee=n.memo(n.add(n.add(n.mul(Y,U),T),n.mul(G,Q)));let te=n.memo(n.mul(n.sub(n.mul(m,ee),o.out),N));let se=n.add(te,o.out);o.in(n.add(se,te));ee=n.memo(n.add(n.add(n.mul(se,A),L),n.mul(E,Z)));te=n.memo(n.mul(n.sub(n.mul(d,ee),l.out),N));se=n.add(te,l.out);l.in(n.add(se,te));ee=n.memo(n.add(n.add(n.mul(se,C),B),n.mul(W,J)));te=n.memo(n.mul(n.sub(n.mul(f,ee),u.out),N));se=n.add(te,u.out);u.in(n.add(se,te));te=n.memo(n.mul(n.sub(n.mul(p,ee),c.out),N));se=n.add(te,c.out);c.in(n.add(se,te));if(a){}else{}return se});const t=s=>{const a=Object.create(i);const r=Object.assign({},t.defaults,i.defaults,s);const o=r.input.isStereo;Object.assign(a,r);const l=e.factory(a,e.genish.diodeZDF(n.in("input"),n.in("Q"),n.in("cutoff"),n.in("saturation"),o),["filters","Filter24TB303"],r);return l};t.defaults={input:0,Q:.65,saturation:1,cutoff:880};return t}},{"./filter.js":88,"genish.js":37}],88:[function(e,t,s){let n=e("../ugen.js");let i=Object.create(n);Object.assign(i,{defaults:{bypass:false}});t.exports=i},{"../ugen.js":135}],89:[function(e,t,s){let n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.filter24=((e,t,s,i,a=false)=>{let r,o=n.data([0,0,0,0],1,{meta:true}),l={interp:"none",mode:"simple"},u=n.memo(n.mul(t,5)),c=n.memo(n.div(s,11025)),m=n.clamp(n.mul(o[3],u)),d=n.sub(a?e[0]:e,m);o[0]=n.add(o[0],n.mul(n.add(n.mul(-1,o[0]),d),c));o[1]=n.add(o[1],n.mul(n.add(n.mul(-1,o[1]),o[0]),c));o[2]=n.add(o[2],n.mul(n.add(n.mul(-1,o[2]),o[1]),c));o[3]=n.add(o[3],n.mul(n.add(n.mul(-1,o[3]),o[2]),c));let f=n.switch(i,o[3],n.sub(d,o[3]));if(a){let t=n.data([0,0,0,0],1,{meta:true}),s=n.clamp(n.mul(t[3],u)),a=n.sub(e[1],s);t[0]=n.add(t[0],n.mul(n.add(n.mul(-1,t[0]),a),c));t[1]=n.add(t[1],n.mul(n.add(n.mul(-1,t[1]),t[0]),c));t[2]=n.add(t[2],n.mul(n.add(n.mul(-1,t[2]),t[1]),c));t[3]=n.add(t[3],n.mul(n.add(n.mul(-1,t[3]),t[2]),c));let o=n.switch(i,t[3],n.sub(a,t[3]));r=[f,o]}else{r=f}return r});let t=s=>{let a=Object.create(i);let r=Object.assign({},t.defaults,i.defaults,s);let o=r.input.isStereo;const l=e.factory(a,e.genish.filter24(n.in("input"),n.in("Q"),n.in("cutoff"),n.in("isLowPass"),o),["filters","Filter24Classic"],r);return l};t.defaults={input:0,Q:.25,cutoff:880,isLowPass:1};return t}},{"./filter.js":88,"genish.js":37}],90:[function(e,t,s){t.exports=function(t){const s=t.genish;const n={Filter24Classic:e("./filter24.js")(t),Filter24Moog:e("./ladderFilterZeroDelay.js")(t),Filter24TB303:e("./diodeFilterZDF.js")(t),Filter12Biquad:e("./biquad.js")(t),Filter12SVF:e("./svf.js")(t),genish:{Comb:e("./combfilter.js"),AllPass:e("./allpass.js")},factory(e,t,i,a=null,r,o=false){let l;let u=Object.assign({},n.defaults,r);switch(u.filterType){case 1:l=s.filter24(e,s.in("Q"),t,u.filterMode,o);break;case 2:l=s.zd24(e,s.in("Q"),t);break;case 3:l=s.diodeZDF(e,s.in("Q"),t,s.in("saturation"),o);break;case 4:l=s.svf(e,t,s.sub(1,s.in("Q")),u.filterMode,o);break;case 5:l=s.biquad(e,t,s.in("Q"),u.filterMode,o);break;default:l=e;break}return l},defaults:{filterMode:0,filterType:0}};n.export=(e=>{for(let t in n){if(t!=="export"&&t!=="genish"){e[t]=n[t]}}});return n}},{"./allpass.js":84,"./biquad.js":85,"./combfilter.js":86,"./diodeFilterZDF.js":87,"./filter24.js":89,"./ladderFilterZeroDelay.js":91,"./svf.js":92}],91:[function(e,t,s){const n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.zd24=((e,t,s,i=false)=>{const a=1/n.gen.samplerate,r=n.history(0),o=n.history(0),l=n.history(0),u=n.history(0);const c=n.memo(n.add(.5,n.mul(t,23)));const m=n.memo(n.mul(Math.PI*2,s));const d=n.memo(n.mul(2/a,n.tan(n.mul(m,a/2))));const f=n.memo(n.mul(d,a/2));const p=n.memo(n.mul(4,n.div(n.sub(c,.5),24.5)));const h=n.add(1,f);const g=n.memo(n.div(f,h)),j=n.memo(n.mul(g,g)),b=n.mul(j,g),y=n.mul(j,j);const x=n.div(r.out,h),v=n.div(o.out,h),$=n.div(l.out,h),_=n.div(u.out,h);const k=n.memo(n.add(n.add(n.mul(b,x),n.mul(j,v)),n.add(n.mul(g,$),_)));const w=n.sub(e,n.mul(p,k));const O=n.memo(n.add(1,n.mul(p,y)));const M=n.memo(n.div(w,O));let I=n.memo(n.mul(n.sub(M,r.out),g));let N=n.memo(n.add(I,r.out));r.in(n.add(N,I));I=n.memo(n.mul(n.sub(N,o.out),g));N=n.memo(n.add(I,o.out));o.in(n.add(N,I));I=n.memo(n.mul(n.sub(N,l.out),g));N=n.memo(n.add(I,l.out));l.in(n.add(N,I));I=n.memo(n.mul(n.sub(N,u.out),g));N=n.memo(n.add(I,u.out));u.in(n.add(N,I));if(i){}return N});const t=s=>{const a=Object.create(i);const r=Object.assign({},t.defaults,a.defaults,s);const o=r.input.isStereo;const l=e.factory(a,e.genish.zd24(n.in("input"),n.in("Q"),n.in("cutoff"),o),["filters","Filter24Moog"],r);return l};t.defaults={input:0,Q:.75,cutoff:440};return t}},{"./filter.js":88,"genish.js":37}],92:[function(e,t,s){const n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.svf=((e,t,s,i,a)=>{let r=n.data([0,0],1,{meta:true}),o=n.data([0,0],1,{meta:true}),l={mode:"simple",interp:"none"};let u=n.memo(n.mul(2*Math.PI,n.div(t,n.gen.samplerate)));let c=n.memo(n.div(1,s));let m=n.memo(n.add(o[0],n.mul(u,r[0]))),d=n.memo(n.sub(n.sub(a?e[0]:e,m),n.mul(s,r[0]))),f=n.memo(n.add(n.mul(u,d),r[0])),p=n.memo(n.add(d,m));r[0]=f;o[0]=m;let h=n.selector(i,m,d,f,p);let g;if(a){let t=n.data([0,0],1,{meta:true}),a=n.data([0,0],1,{meta:true});let r=n.memo(n.add(a[0],n.mul(u,t[0]))),o=n.memo(n.sub(n.sub(e[1],r),n.mul(s,t[0]))),l=n.memo(n.add(n.mul(u,o),t[0])),c=n.memo(n.add(o,r));t[0]=l;a[0]=r;let m=n.selector(i,r,o,l,c);g=[h,m]}else{g=h}return g});let t=s=>{const a=Object.create(i);const r=Object.assign({},t.defaults,i.defaults,s);const o=r.input.isStereo;const l=e.factory(a,e.genish.svf(n.in("input"),n.mul(n.in("cutoff"),n.gen.samplerate/5),n.sub(1,n.in("Q")),n.in("mode"),o),["filters","Filter12SVF"],r);return l};t.defaults={input:0,Q:.65,cutoff:440,mode:0};return t}},{"./filter.js":88,"genish.js":37}],93:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a=Object.assign({bitCrusherLength:44100},t.defaults,i.defaults,s),r=Object.create(i);let o=a.input.isStereo!==undefined?a.input.isStereo:true;let l=n.in("input"),u=n.in("bitDepth"),c=n.in("sampleRate"),m=o?l[0]:l,d=o?l[1]:null;let f=n.history(0);let p=n.counter(c,0,1);let h=n.pow(n.mul(u,16),2);let g=n.div(n.floor(n.mul(m,h)),h);let j=n.switch(p.wrap,g,f.out);let b;if(o){let t=n.history(0);let s=n.div(n.floor(n.mul(d,h)),h);let i=ternary(p.wrap,s,f.out);b=e.factory(r,[j,i],["fx","bitCrusher"],a)}else{b=e.factory(r,j,["fx","bitCrusher"],a)}return b};t.defaults={input:0,bitDepth:.5,sampleRate:.5};return t}},{"./effect.js":99,"genish.js":37}],94:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=Object.create(i);let s=a=>{let r=Object.create(t),o=88200;let l=Object.assign({},s.defaults,i.defaults,a);let u=l.input.isStereo!==undefined?l.input.isStereo:false;let c=n.accum(1,0,{shouldWrap:false});let m=n.in("input"),d=u?m[0]:m,f=u?m[1]:null,p=n.in("rate"),h=n.in("chance"),g=n.in("reverseChance"),j=n.in("repitchChance"),b=n.in("repitchMin"),y=n.in("repitchMax");let x=n.history(1);let v=n.eq(n.mod(c,p),0);let $=n.memo(n.sah(n.lt(n.noise(),h),v,0));let _=n.memo(n.and(v,$));let k=n.lt(n.noise(),g),w=n.switch(k,-1,1);let O=n.ifelse(n.and(_,n.lt(n.noise(),j)),n.memo(n.mul(n.add(b,n.mul(n.sub(y,b),n.noise())),w)),w);x.in(n.switch(_,O,x.out));let M=n.memo(n.div(p,100)),I=n.memo(n.div(1,M));let N=n.data(o),P=u?n.data(o):null;let S=n.accum(x.out,0,{shouldWrap:false});let q=n.wrap(n.sub(n.mod(S,o),22050),0,o);let D=n.peek(N,n.accum(1,0,{max:88200}),{mode:"simple"});let U=n.switch($,q,n.mod(S,o));let A=n.memo(n.peek(N,U,{mode:"samples"}));let C=n.and(_,$);let F=n.accum(1,_,{shouldWrap:false});let z=n.memo(n.div(F,M));let R=n.div(n.sub(p,F),n.sub(p,M));let G=n.ifelse(n.lt(F,M),n.memo(n.mul(n.switch(n.lt(z,1),z,1),A)),n.gt(F,n.sub(p,M)),n.memo(n.mul(n.gtp(R,0),A)),A);let E=n.mix(D,G,$);let W=n.poke(N,d,n.mod(n.add(c,44100),88200));let V=n.pan(E,E,n.in("pan"));let B=e.factory(r,[V.left,V.right],["fx","shuffler"],l);return B};s.defaults={input:0,rate:22050,chance:.25,reverseChance:.5,repitchChance:.5,repitchMin:.5,repitchMax:2,pan:.5,mix:.5};return s}},{"./effect.js":99,"genish.js":37}],95:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{const a=Object.assign({},t.defaults,i.defaults,s);const r=Object.create(e.prototypes.ugen);const o=n.in("input"),l=n.in("slowFrequency"),u=n.in("fastFrequency"),c=n.in("slowGain"),m=n.in("fastGain");const d=typeof a.input.isStereo!=="undefined"?a.input.isStereo:true;const f=d?o[0]:o;const p=n.env("inversewelch",1024),h=n.env("inversewelch",1024,0,.333),g=n.env("inversewelch",1024,0,.666);const j=n.phasor(l,0,{min:0}),b=n.mul(n.peek(p,j),c),y=n.mul(n.peek(h,j),c),x=n.mul(n.peek(g,j),c);const v=n.phasor(u,0,{min:0}),$=n.mul(n.peek(p,v),m),_=n.mul(n.peek(h,v),m),k=n.mul(n.peek(g,v),m);let w=e.mode==="processor"?e.processor.sampleRate:e.ctx.sampleRate;const O=w/1e3;const M=100*O;const I=n.mul(n.add(b,$,5),O),N=n.mul(n.add(y,_,5),O),P=n.mul(n.add(x,k,5),O);const S=n.delay(f,I,{size:M}),q=n.delay(f,N,{size:M}),D=n.delay(f,P,{size:M});const U=n.add(S,q,D);if(d){const e=o[1];const t=n.delay(e,I,{size:M}),s=n.delay(e,N,{size:M}),i=n.delay(e,P,{size:M});const a=n.add(t,q,i);r.graph=[n.add(S,s,D),a]}else{r.graph=U}const A=e.factory(r,r.graph,["fx","chorus"],a);return A};t.defaults={input:0,slowFrequency:.18,slowGain:1,fastFrequency:6,fastGain:.2};return t}},{"./effect.js":99,"genish.js":37}],96:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js");const a=n;"use jsdsp";const r=(e,t,s)=>{"use jsdsp";const i=a.sub(e,0);const r=n.delay(i,142);i.inputs[1]=a.mul(r,t);const o=a.add(a.mul(i,t),r);const l=a.sub(o,0);const u=n.delay(l,107);l.inputs[1]=a.mul(u,t);const c=a.add(a.mul(l,t),u);const m=a.sub(c,0);const d=n.delay(m,379);m.inputs[1]=a.mul(d,s);const f=a.add(a.mul(m,s),d);const p=a.sub(f,0);const h=n.delay(p,277);p.inputs[1]=a.mul(h,s);const g=a.add(a.mul(p,s),h);return g};const o=function(e,t,s,i,r){"use jsdsp";const o=[[],[],[],[],[]];const l=a.add(e,0);const u=a.add(l,0);const c=n.delay(u,[a.add(a.mul(n.cycle(.1),16),672)],{size:688});u.inputs[1]=a.mul(c,t);const m=a.sub(c,a.mul(u,t));const d=n.delay(m,[4453,353,3627,1190]);o[3].push(a.add(d.outputs[1],d.outputs[2]));o[2].push(d.outputs[3]);const f=n.history(0);const p=n.mix(d,f.out,i);f.in(p);const h=a.mul(p,r);const g=a.sub(h,0);const j=n.delay(g,[1800,187,1228]);o[2].push(j.outputs[1]);o[4].push(j.outputs[2]);g.inputs[1]=a.mul(j,s);const b=a.mul(g,s);const y=a.add(j,b);const x=n.delay(y,[3720,1066,2673]);o[2].push(x.outputs[1]);o[3].push(x.outputs[2]);const v=a.add(a.mul(x,r),e);const $=a.add(v,0);const _=n.delay($,a.add(a.mul(n.cycle(.07),16),908),{size:924});$.inputs[1]=a.mul(_,t);const k=a.sub(_,a.mul($,t));const w=n.delay(k,[4217,266,2974,2111]);o[1].push(a.add(w.outputs[1],w.outputs[2]));o[4].push(w.outputs[3]);const O=n.history(0);const M=n.mix(w,O.out,i);O.in(M);const I=a.mul(M,r);const N=a.sub(I,0);const P=n.delay(N,[2656,335,1913]);o[4].push(P.outputs[1]);o[2].push(P.outputs[2]);N.inputs[1]=a.mul(P,s);const S=a.mul(N,s);const q=a.add(P,S);const D=n.delay(q,[3163,121,1996]);o[4].push(x.outputs[1]);o[1].push(x.outputs[2]);l.inputs[1]=a.mul(D,r);o[1]=n.add(...o[1]);o[2]=n.add(...o[2]);o[3]=n.add(...o[3]);o[4]=n.add(...o[4]);return o};t.exports=function(e){const t=s=>{const l=Object.assign({},t.defaults,i.defaults,s),u=Object.create(i);const c=l.input.isStereo!==undefined?l.input.isStereo:true;const m=n.in("input"),d=n.in("damping"),f=n.in("drywet"),p=n.in("decay"),h=n.in("predelay"),g=n.in("inbandwidth"),j=n.in("decaydiffusion1"),b=n.in("decaydiffusion2"),y=n.in("indiffusion1"),x=n.in("indiffusion2");const v=c===true?n.add(m[0],m[1]):m;let $;{"use jsdsp";const t=n.mstosamps(h);const s=n.delay(v,t,{size:4410});const i=n.history(0);const _=n.mix(i.out,s,g);i.in(_);const k=_;const w=r(k,y,x);const O=o(w,j,b,d,p);const M=a.mul(a.sub(O[1],O[2]),.6);const I=a.mul(a.sub(O[3],O[4]),.6);const N=n.mix(c?m[0]:m,M,f);const P=n.mix(c?m[1]:m,I,f);$=e.factory(u,[N,P],["fx","plate"],l)}return $};t.defaults={input:0,damping:.5,drywet:.5,decay:.5,predelay:10,inbandwidth:.5,indiffusion1:.75,indiffusion2:.625,decaydiffusion1:.7,decaydiffusion2:.5};return t}},{"./effect.js":99,"genish.js":37}],97:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a=Object.assign({delayLength:44100},t.defaults,s),r=Object.create(i);let o=a.input.isStereo!==undefined?a.input.isStereo:false;let l=n.in("input"),u=n.in("time"),c=n.in("wetdry"),m=o?l[0]:l,d=o?l[1]:null;let f=n.in("feedback");let p=n.history();let h=n.delay(n.add(m,n.mul(p.out,f)),u,{size:a.delayLength});p.in(h);let g=n.mix(m,h,c);let j;if(o){let t=n.history();let s=n.delay(n.add(d,n.mul(t.out,f)),u,{size:a.delayLength});t.in(s);const i=n.mix(d,s,c);j=e.factory(r,[g,i],["fx","delay"],a)}else{j=e.factory(r,g,["fx","delay"],a)}return j};t.defaults={input:0,feedback:.75,time:11025,wetdry:.5};return t}},{"./effect.js":99,"genish.js":37}],98:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js");const a=n;t.exports=function(e){let t=s=>{let r=Object.assign({},t.defaults,i.defaults,s),o=Object.create(i);let l=r.input.isStereo!==undefined?r.input.isStereo:true;const u=n.in("input"),c=n.in("shape1"),m=n.in("shape2"),d=n.in("pregain"),f=n.in("postgain");let p,h;{"use jsdsp";const e=l?u[0]:u;const t=a.sub(n.exp(a.mul(e,a.add(c,d))),n.exp(a.mul(e,a.sub(m,d))));const s=a.add(n.exp(a.mul(e,d)),n.exp(a.mul(a.mul(-1,e),d)));p=a.mul(a.div(t,s),f)}if(l){let t;{"use jsdsp";const e=l?u[1]:u;const s=a.sub(n.exp(a.mul(e,a.add(c,d))),n.exp(a.mul(e,a.sub(m,d))));const i=a.add(n.exp(a.mul(e,d)),n.exp(a.mul(a.mul(-1,e),d)));t=a.mul(a.div(s,i),f)}h=e.factory(o,[p,t],["fx","distortion"],r)}else{h=e.factory(o,p,["fx","distortion"],r)}return h};t.defaults={input:0,shape1:.1,shape2:.1,pregain:5,postgain:.5};return t}},{"./effect.js":99,"genish.js":37}],99:[function(e,t,s){let n=e("../ugen.js");let i=Object.create(n);Object.assign(i,{defaults:{bypass:false}});t.exports=i},{"../ugen.js":135}],100:[function(e,t,s){t.exports=function(t){const s={Freeverb:e("./freeverb.js")(t),Plate:e("./dattorro.js")(t),Flanger:e("./flanger.js")(t),Vibrato:e("./vibrato.js")(t),Delay:e("./delay.js")(t),BitCrusher:e("./bitCrusher.js")(t),Distortion:e("./distortion.js")(t),RingMod:e("./ringMod.js")(t),Tremolo:e("./tremolo.js")(t),Chorus:e("./chorus.js")(t),Shuffler:e("./bufferShuffler.js")(t)};s.export=(e=>{for(let t in s){if(t!=="export"){e[t]=s[t]}}});return s}},{"./bitCrusher.js":93,"./bufferShuffler.js":94,"./chorus.js":95,"./dattorro.js":96,"./delay.js":97,"./distortion.js":98,"./flanger.js":101,"./freeverb.js":102,"./ringMod.js":103,"./tremolo.js":104,"./vibrato.js":105}],101:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a=Object.assign({delayLength:44100},t.defaults,i.defaults,s),r=Object.create(i);let o=a.input.isStereo!==undefined?a.input.isStereo:true;let l=n.in("input"),u=a.delayLength,c=n.in("feedback"),m=n.in("offset"),d=n.in("frequency"),f=n.data(u),p;let h=n.accum(1,0,{min:0,max:u,interp:"none",mode:"samples"});let g=n.mul(m,500);let j=a.mod===undefined?n.cycle(d):a.mod;let b=n.wrap(n.add(n.sub(h,g),j),0,u);let y=o?l[0]:l;let x=n.peek(f,b,{interp:"linear",mode:"samples"});n.poke(f,n.add(y,n.mul(x,c)),h);let v=n.add(y,x),$,_;if(o===true){rightInput=l[1];p=n.data(u);let t=n.peek(p,b,{interp:"linear",mode:"samples"});n.poke(p,n.add(rightInput,n.mul(t,c)),h);$=n.add(rightInput,t);_=e.factory(r,[v,$],["fx","flanger"],a)}else{_=e.factory(r,v,["fx","flanger"],a)}return _};t.defaults={input:0,feedback:.01,offset:.25,frequency:.5};return t}},{"./effect.js":99,"genish.js":37}],102:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js");t.exports=function(e){const t=e.filters.genish.AllPass;const s=e.filters.genish.Comb;const a={combCount:8,combTuning:[1116,1188,1277,1356,1422,1491,1557,1617],allPassCount:4,allPassTuning:[225,556,441,341],allPassFeedback:.5,fixedGain:.015,scaleDamping:.4,scaleRoom:.28,offsetRoom:.7,stereoSpread:23};const r=o=>{let l=Object.assign({},r.defaults,i.defaults,o),u=Object.create(i);let c=l.input.isStereo!==undefined?l.input.isStereo:true;let m=[],d=[];let f=n.in("input"),p=n.in("wet1"),h=n.in("wet2"),g=n.in("dry"),j=n.in("roomSize"),b=n.in("damping");let y=c===true?n.add(f[0],f[1]):f,x=n.memo(n.mul(y,a.fixedGain));for(let e=0;e<8;e++){m.push(s(x,a.combTuning[e],n.mul(b,.4),n.mul(a.scaleRoom+a.offsetRoom,j)));d.push(s(x,a.combTuning[e]+a.stereoSpread,n.mul(b,.4),n.mul(a.scaleRoom+a.offsetRoom,j)))}let v=n.add(x,...m);let $=n.add(x,...d);for(let e=0;e<4;e++){v=t(v,a.allPassTuning[e]+a.stereoSpread);$=t($,a.allPassTuning[e]+a.stereoSpread)}let _=n.add(n.mul(v,p),n.mul($,h),n.mul(c===true?f[0]:f,g)),k=n.add(n.mul($,p),n.mul(v,h),n.mul(c===true?f[1]:f,g));const w=e.factory(u,[_,k],["fx","freeverb"],l);return w};r.defaults={input:0,wet1:1,wet2:0,dry:.5,roomSize:.84,damping:.5,bypass:false};return r}},{"./effect.js":99,"genish.js":37}],103:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a=Object.assign({},t.defaults,i.defaults,s),r=Object.create(i);let o=a.input.isStereo!==undefined?a.input.isStereo:true;let l=n.in("input"),u=n.in("frequency"),c=n.in("gain"),m=n.in("mix");let d=o?l[0]:l,f=n.mul(n.cycle(u),c);let p=n.add(n.mul(d,n.sub(1,m)),n.mul(n.mul(d,f),m)),h;let g;if(o===true){let t=l[1];h=n.add(n.mul(t,n.sub(1,m)),n.mul(n.mul(t,f),m));g=e.factory(r,[p,h],"ringMod",a)}else{g=e.factory(r,p,["fx","ringMod"],a)}return g};t.defaults={input:0,frequency:220,gain:1,mix:1};return t}},{"./effect.js":99,"genish.js":37}],104:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js");t.exports=function(e){const t=s=>{const a=Object.assign({},t.defaults,i.defaults,s),r=Object.create(i);const o=a.input.isStereo!==undefined?a.input.isStereo:true;const l=n.in("input"),u=n.in("frequency"),c=n.in("amount");const m=o?l[0]:l;let d;if(a.shape==="square"){d=n.gt(n.phasor(u),0)}else if(a.shape==="saw"){d=n.gtp(n.phasor(u),0)}else{d=n.cycle(u)}const f=n.mul(d,c);let p=n.sub(m,n.mul(m,f)),h,g;if(o===true){let t=l[1];h=n.mul(t,f);g=e.factory(r,[p,h],["fx","tremolo"],a)}else{g=e.factory(r,p,["fx","tremolo"],a)}return g};t.defaults={input:0,frequency:2,amount:1,shape:"sine"};return t}},{"./effect.js":99,"genish.js":37}],105:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a=Object.assign({},t.defaults,i.defaults,s),r=Object.create(i);let o=a.input.isStereo!==undefined?a.input.isStereo:true;let l=n.in("input"),u=44100,c=.01,m=n.in("amount"),d=n.in("frequency"),f=n.data(u),p;let h=n.accum(1,0,{min:0,max:u,interp:"none",mode:"samples"});let g=n.mul(m,500);let j=n.wrap(n.add(n.sub(h,g),n.mul(n.cycle(d),n.sub(g,1))),0,u);let b=o?l[0]:l;let y=n.peek(f,j,{interp:"linear",mode:"samples"});n.poke(f,n.add(b,n.mul(y,c)),h);let x=y,v,$;if(o===true){rightInput=l[1];p=n.data(u);let t=n.peek(p,j,{interp:"linear",mode:"samples"});n.poke(p,n.add(rightInput,mul(t,c)),h);v=t;$=e.factory(r,[x,v],["fx","vibrato"],a)}else{$=e.factory(r,x,["fx","vibrato"],a)}return $};t.defaults={input:0,amount:.5,frequency:4};return t}},{"./effect.js":99,"genish.js":37}],106:[function(e,t,s){let n=e("memory-helper"),i=e("genish.js");let a={blockCallbacks:[],dirtyUgens:[],callbackUgens:[],callbackNames:[],analyzers:[],graphIsDirty:false,ugens:{},debug:false,id:-1,preventProxy:false,output:null,memory:null,factory:null,genish:i,scheduler:e("./scheduling/scheduler.js"),workletProcessor:null,memoed:{},mode:"scriptProcessor",prototypes:{ugen:e("./ugen.js"),instrument:e("./instruments/instrument.js"),effect:e("./fx/effect.js")},mixins:{polyinstrument:e("./instruments/polyMixin.js")},workletPath:"./gibberish_worklet.js",init(e,t,s){let i=isNaN(e)?20*60*44100:e;this.genish.gen.mode="scriptProcessor";this.memory=n.create(i);this.mode=window.AudioWorklet!==undefined?"worklet":"scriptprocessor";if(s!==undefined)this.mode=s;this.hasWorklet=window.AudioWorklet!==undefined&&typeof window.AudioWorklet==="function";const r=this.hasWorklet?this.utilities.createWorklet:this.utilities.createScriptProcessor;this.analyzers.dirty=false;if(this.mode==="worklet"){const e=new Promise((e,s)=>{const n=new Promise((e,s)=>{this.utilities.createContext(t,r.bind(this.utilities),e)}).then(()=>{a.preventProxy=true;a.load();a.output=this.Bus2();a.preventProxy=false;e()})});return e}else if(this.mode==="processor"){a.load();a.output=this.Bus2()}},load(){this.factory=e("./ugenTemplate.js")(this);this.Panner=e("./misc/panner.js")(this);this.PolyTemplate=e("./instruments/polytemplate.js")(this);this.oscillators=e("./oscillators/oscillators.js")(this);this.filters=e("./filters/filters.js")(this);this.binops=e("./misc/binops.js")(this);this.monops=e("./misc/monops.js")(this);this.Bus=e("./misc/bus.js")(this);this.Bus2=e("./misc/bus2.js")(this);this.instruments=e("./instruments/instruments.js")(this);this.fx=e("./fx/effects.js")(this);this.Sequencer=e("./scheduling/sequencer.js")(this);this.Sequencer2=e("./scheduling/seq2.js")(this);this.envelopes=e("./envelopes/envelopes.js")(this);this.analysis=e("./analysis/analyzers.js")(this);this.time=e("./misc/time.js")(this)},export(e,t=false){if(e===undefined)throw Error("You must define a target object for Gibberish to export variables to.");if(t)this.genish.export(e);this.instruments.export(e);this.fx.export(e);this.filters.export(e);this.oscillators.export(e);this.binops.export(e);this.monops.export(e);this.envelopes.export(e);this.analysis.export(e);e.Sequencer=this.Sequencer;e.Sequencer2=this.Sequencer2;e.Bus=this.Bus;e.Bus2=this.Bus2;e.Scheduler=this.scheduler;this.time.export(e);this.utilities.export(e)},print(){console.log(this.callback.toString())},dirty(e){if(e===this.analyzers){this.graphIsDirty=true;this.analyzers.dirty=true}else{this.dirtyUgens.push(e);this.graphIsDirty=true;if(this.memoed[e.ugenName]){delete this.memoed[e.ugenName]}}},clear(){this.output.inputs=[0];this.analyzers.length=0;this.scheduler.clear();this.dirty(this.output);if(this.mode==="worklet"){this.worklet.port.postMessage({address:"method",object:this.id,name:"clear",args:[]})}},generateCallback(){if(this.mode==="worklet"){a.callback=function(){return 0};return a.callback}let e=0,t,s,n="";this.memoed={};t=this.processGraph(this.output);s=t[t.length-1];t.unshift("\t'use strict'");this.analyzers.forEach(e=>{const s=a.processUgen(e);const n=s.pop();s.forEach(e=>{t.splice(t.length-1,0,e)});t.push(n)});this.analyzers.forEach(e=>{if(this.callbackUgens.indexOf(e.callback)===-1)this.callbackUgens.push(e.callback)});this.callbackNames=this.callbackUgens.map(e=>e.ugenName);t.push("\n\treturn "+s.split("=")[0].split(" ")[1]);if(this.debug===true)console.log("callback:\n",t.join("\n"));this.callbackNames.push("memory");this.callbackUgens.push(this.memory.heap);this.callback=Function(...this.callbackNames,t.join("\n"));this.callback.out=[];if(this.oncallback)this.oncallback(this.callback);return this.callback},processGraph(e){this.callbackUgens.length=0;this.callbackNames.length=0;this.callbackUgens.push(e.callback);let t=this.processUgen(e);this.dirtyUgens.length=0;this.graphIsDirty=false;return t},proxyReplace(e){if(typeof e==="object"){if(e.id!==undefined){const t=processor.ugens.get(e.id);return e.prop!==undefined?t[e.prop]:t}}return e},processUgen(e,t){if(t===undefined)t=[];let s=a.dirtyUgens.indexOf(e);let n=a.memoed[e.ugenName];if(n!==undefined){return n}else if(e===true||e===false){throw"Why is ugen a boolean? [true] or [false]"}else if(e.block===undefined||dirtyIndex!==-1){let n=`\tvar v_${e.id} = `;if(!e.isop)n+=`${e.ugenName}( `;let i,r;i=e.isop===true||e.type==="bus"||e.type==="analysis"?Object.keys(e.inputs):[...e.inputNames];for(let s=0;s<i.length;s++){let r=i[s];let o;if(e.isop||e.type==="bus"||e.type==="analysis"){o=e.inputs[r]}else{o=e[r]}if(o!==undefined){if(o.bypass===true){let e=false;while(o.input!=="undefined"&&e===false){if(typeof o.input.bypass!=="undefined"){o=o.input;if(o.bypass===false)e=true}else{o=o.input;e=true}}}if(typeof o==="number"){n+=o}else if(typeof o==="boolean"){n+=""+o}else{if(a.mode==="processor"){if(o.ugenName===undefined&&o.id!==undefined){o=a.processor.ugens.get(o.id)}}a.processUgen(o,t);if(!o.isop){if(a.callbackUgens.indexOf(o.callback)===-1){a.callbackUgens.push(o.callback)}}n+=`v_${o.id}`;o.__varname=`v_${o.id}`}if(s<i.length-1){n+=e.isop?" "+e.op+" ":", "}}}if(e.type==="analysis"||e.type==="bus"&&i.length>0)n+=", ";if(!e.isop&&e.type!=="seq")n+="memory";n+=e.isop?"":" )";t.push(n);a.memoed[e.ugenName]=`v_${e.id}`;if(s!==-1){a.dirtyUgens.splice(s,1)}}else if(e.block){return e.block}return t}};a.utilities=e("./utilities.js")(a);t.exports=a},{"./analysis/analyzers.js":76,"./envelopes/envelopes.js":81,"./filters/filters.js":90,"./fx/effect.js":99,"./fx/effects.js":100,"./instruments/instrument.js":111,"./instruments/instruments.js":112,"./instruments/polyMixin.js":116,"./instruments/polytemplate.js":117,"./misc/binops.js":121,"./misc/bus.js":122,"./misc/bus2.js":123,"./misc/monops.js":124,"./misc/panner.js":125,"./misc/time.js":126,"./oscillators/oscillators.js":129,"./scheduling/scheduler.js":132,"./scheduling/seq2.js":133,"./scheduling/sequencer.js":134,"./ugen.js":135,"./ugenTemplate.js":136,"./utilities.js":137,"genish.js":37,"memory-helper":141}],107:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=s=>{let a=Object.create(i),r=n.in("frequency"),o=n.in("decay"),l=n.in("gain");let u=Object.assign({},t.defaults,s);let c=n.bang(),m=n.mul(c,60),d=n.sub(.101,n.div(o,10)),f=n.svf(m,r,d,2,false),p=n.mul(f,l);a.env=c;e.factory(a,p,["instruments","conga"],u);return a};t.defaults={gain:.25,frequency:190,decay:.85};return t}},{"./instrument.js":111,"genish.js":37}],108:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=s=>{let a=Object.create(i);const r=n.in("decay"),o=n.in("gain");const l=Object.assign({},t.defaults,s);const u=n.param("bpfc",1e3),c=e.oscillators.factory("square",560),m=e.oscillators.factory("square",845),d=n.decay(n.mul(r,n.gen.samplerate*2)),f=n.svf(n.add(c,m),u,3,2,false),p=n.mul(f,d),h=n.mul(p,o);a.env=d;a.isStereo=false;a=e.factory(a,h,["insturments","cowbell"],l);return a};t.defaults={gain:1,decay:.5};return t}},{"./instrument.js":111,"genish.js":37}],109:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=s=>{let a=Object.create(i);let r=n.in("frequency"),o=n.in("glide"),l=n.slide(r,o,o),u=n.in("cmRatio"),c=n.in("index"),m=n.in("feedback"),d=n.in("attack"),f=n.in("decay"),p=n.in("sustain"),h=n.in("sustainLevel"),g=n.in("release");const j=Object.assign({},t.defaults,s);Object.assign(a,j);a.__createGraph=function(){const t=e.envelopes.factory(j.useADSR,j.shape,d,f,p,h,g,j.triggerRelease);const s=n.history(0);const i=e.oscillators.factory(a.modulatorWaveform,n.add(n.mul(l,u),n.mul(s.out,m,c)),a.antialias);const o=n.mul(i,n.mul(l,c));const b=n.mul(o,t);const y=n.mul(.5,n.add(b,s.out));s.in(y);const x=e.oscillators.factory(a.carrierWaveform,n.add(l,y),a.antialias);const v=n.mul(x,t);const $=n.mul(n.in("cutoff"),r);const _=n.mul(n.mul($,n.pow(2,n.in("filterMult"))),t);const k=e.filters.factory(v,_,n.in("Q"),n.in("saturation"),a);const w=n.mul(k,n.in("gain"));let O;if(j.panVoices===true){O=n.pan(w,w,n.in("pan"));a.graph=[O.left,O.right]}else{a.graph=w}a.env=t};a.__requiresRecompilation=["carrierWaveform","modulatorWaveform","antialias","filterType","filterMode"];a.__createGraph();const b=e.factory(a,a.graph,["instruments","FM"],j);return b};t.defaults={carrierWaveform:"sine",modulatorWaveform:"sine",attack:44,feedback:0,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:false,shape:"linear",triggerRelease:false,gain:1,cmRatio:2,index:5,pulsewidth:.25,frequency:220,pan:.5,antialias:false,panVoices:false,glide:1,saturation:1,filterMult:1.5,Q:.25,cutoff:.35,filterType:0,filterMode:0,isLowPass:1};let s=e.PolyTemplate(t,["glide","frequency","attack","decay","pulsewidth","pan","gain","cmRatio","index","saturation","filterMult","Q","cutoff","antialias","filterType","carrierWaveform","modulatorWaveform","filterMode","feedback","useADSR","sustain","release","sustainLevel"]);return[t,s]}},{"./instrument.js":111,"genish.js":37}],110:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=s=>{let a=Object.create(i),r=n.in("tune"),o=n.memo(n.add(.4,r)),l=n.in("decay"),u=n.in("gain");let c=Object.assign({},t.defaults,s);let m=n.mul(325,o),d=n.mul(n.param("bpfc",7e3),o),f=n.mul(n.param("hpfc",11e3),o),p=e.oscillators.factory("square",m,false),h=e.oscillators.factory("square",n.mul(m,1.4471)),g=e.oscillators.factory("square",n.mul(m,1.617)),j=e.oscillators.factory("square",n.mul(m,1.9265)),b=e.oscillators.factory("square",n.mul(m,2.5028)),y=e.oscillators.factory("square",n.mul(m,2.6637)),x=n.add(p,h,g,j,b,y),v=n.decay(n.mul(l,n.gen.samplerate*2)),$=n.svf(x,d,.5,2,false),_=n.mul($,v),k=n.filter24(_,0,f,0),w=n.mul(k,u);a.env=v;a.isStereo=false;const O=e.factory(a,w,["instruments","hat"],c);return O};t.defaults={gain:1,tune:.6,decay:.1};return t}},{"./instrument.js":111,"genish.js":37}],111:[function(e,t,s){let n=e("../ugen.js"),i=e("genish.js");let a=Object.create(n);Object.assign(a,{note(e){this.frequency=e;this.env.trigger()},trigger(e=1){this.gain=e;this.env.trigger()}});t.exports=a},{"../ugen.js":135,"genish.js":37}],112:[function(e,t,s){t.exports=function(t){const s={Kick:e("./kick.js")(t),Conga:e("./conga.js")(t),Clave:e("./conga.js")(t),Hat:e("./hat.js")(t),Snare:e("./snare.js")(t),Cowbell:e("./cowbell.js")(t)};s.Clave.defaults.frequency=2500;s.Clave.defaults.decay=.5;[s.Synth,s.PolySynth]=e("./synth.js")(t);[s.Monosynth,s.PolyMono]=e("./monosynth.js")(t);[s.FM,s.PolyFM]=e("./fm.js")(t);[s.Sampler,s.PolySampler]=e("./sampler.js")(t);[s.Karplus,s.PolyKarplus]=e("./karplusstrong.js")(t);s.export=(e=>{for(let t in s){if(t!=="export"){e[t]=s[t]}}});return s}},{"./conga.js":107,"./cowbell.js":108,"./fm.js":109,"./hat.js":110,"./karplusstrong.js":113,"./kick.js":114,"./monosynth.js":115,"./sampler.js":118,"./snare.js":119,"./synth.js":120}],113:[function(e,t,s){const n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=s=>{const a=Object.assign({},t.defaults,s);let r=Object.create(i);let o=e.mode==="processor"?e.processor.sampleRate:e.ctx.sampleRate;const l=n.bang(),u=n.accum(1,l,{max:Infinity}),c=n.gtp(n.sub(1,n.div(u,200)),0),m=n.mul(n.noise(),c),d=n.history(),f=n.in("frequency"),p=n.in("glide"),h=n.slide(f,p,p),g=n.delay(n.add(m,d.out),n.div(o,h),{size:2048}),j=n.mul(g,n.t60(n.mul(n.in("decay"),h))),b=n.mix(j,d.out,n.in("damping")),y=n.mul(b,n.in("gain"));d.in(b);const x=Object.assign({},t.defaults,a);Object.assign(r,{properties:a,env:l,phase:u,getPhase(){return e.memory.heap[u.memory.value.idx]}});if(x.panVoices){const t=n.pan(y,y,n.in("pan"));r=e.factory(r,[t.left,t.right],["instruments","karplus"],a)}else{r=e.factory(r,y,["instruments","karplus"],a)}return r};t.defaults={decay:.97,damping:.2,gain:1,frequency:220,pan:.5,glide:1,panVoices:false};let s=(t,s)=>{let n=()=>{let i=t.getPhase(),a=s.decay*sampleRate;if(i>a){s.disconnectUgen(t);t.isConnected=false;e.memory.heap[t.phase.memory.value.idx]=0}else{e.blockCallbacks.push(n)}};return n};let a=e.PolyTemplate(t,["frequency","decay","damping","pan","gain","glide"],s);return[t,a]}},{"./instrument.js":111,"genish.js":37}],114:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=s=>{let a=Object.create(i);let r=n.in("frequency"),o=n.in("decay"),l=n.in("tone"),u=n.in("gain");let c=Object.assign({},t.defaults,s);Object.assign(a,c);let m=n.bang(),d=n.mul(m,60),f=n.sub(1.005,o),p=n.add(50,n.mul(l,4e3)),h=n.svf(d,r,f,2,false),g=n.svf(h,p,.5,0,false),j=n.mul(g,u);a.env=m;const b=e.factory(a,j,["instruments","kick"],c);return b};t.defaults={gain:1,frequency:85,tone:.25,decay:.9};return t}},{"./instrument.js":111,"genish.js":37}],115:[function(e,t,s){const n=e("genish.js"),i=e("./instrument.js"),a=e("../oscillators/fmfeedbackosc.js");t.exports=function(e){const t=s=>{const a=Object.create(i),r=[],o=n.in("frequency"),l=n.in("glide"),u=n.memo(n.slide(o,l,l)),c=n.in("attack"),m=n.in("decay"),d=n.in("sustain"),f=n.in("sustainLevel"),p=n.in("release");const h=Object.assign({},t.defaults,s);Object.assign(a,h);a.__createGraph=function(){const t=e.envelopes.factory(h.useADSR,h.shape,c,m,d,f,p,h.triggerRelease);for(let t=0;t<3;t++){let s,i;switch(t){case 1:i=n.add(u,n.mul(u,n.in("detune2")));break;case 2:i=n.add(u,n.mul(u,n.in("detune3")));break;default:i=u}s=e.oscillators.factory(a.waveform,i,a.antialias);r[t]=s}const s=n.add(...r),i=n.mul(n.mul(s,t),n.in("gain")),l=n.mul(n.in("cutoff"),o),g=n.mul(n.mul(l,n.pow(2,n.in("filterMult"))),t),j=e.filters.factory(i,g,n.in("Q"),n.in("saturation"),a);if(h.panVoices){const e=n.pan(j,j,n.in("pan"));a.graph=[e.left,e.right]}else{a.graph=j}a.env=t};a.__requiresRecompilation=["waveform","antialias","filterType","filterMode"];a.__createGraph();const g=e.factory(a,a.graph,["instruments","Monosynth"],h);return g};t.defaults={waveform:"saw",attack:44,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:false,shape:"linear",triggerRelease:false,gain:.25,pulsewidth:.25,frequency:220,pan:.5,detune2:.005,detune3:-.005,cutoff:1,resonance:.25,Q:.5,panVoices:false,glide:1,antialias:false,filterType:2,filterMode:0,saturation:.5,filterMult:4,isLowPass:true};let s=e.PolyTemplate(t,["frequency","attack","decay","cutoff","Q","detune2","detune3","pulsewidth","pan","gain","glide","saturation","filterMult","antialias","filterType","waveform","filterMode"]);return[t,s]}},{"../oscillators/fmfeedbackosc.js":128,"./instrument.js":111,"genish.js":37}],116:[function(e,t,s){t.exports={note(e,t){if(Gibberish.mode!=="worklet"){let s=this.__getVoice__();Object.assign(s,this.properties);if(t===undefined)t=this.gain;s.gain=t;s.note(e);this.__runVoice__(s,this);this.triggerNote=e}},trigger(e){if(this.triggerChord!==null){this.triggerChord.forEach(t=>{let s=this.__getVoice__();Object.assign(s,this.properties);s.note(t);s.gain=e;this.__runVoice__(s,this)})}else if(this.triggerNote!==null){let t=this.__getVoice__();Object.assign(t,this.properties);t.note(this.triggerNote);t.gain=e;this.__runVoice__(t,this)}else{let t=this.__getVoice__();Object.assign(t,this.properties);t.trigger(e);this.__runVoice__(t,this)}},__runVoice__(e,t){if(!e.isConnected){e.connect(t);e.isConnected=true}let s;if(t.envCheck===undefined){s=function(){if(e.env.isComplete()){t.disconnectUgen(e);e.isConnected=false}else{Gibberish.blockCallbacks.push(s)}}}else{s=t.envCheck(e,t)}Gibberish.blockCallbacks.push(s)},__getVoice__(){return this.voices[this.voiceCount++%this.voices.length]},chord(e){if(Gibberish.mode!=="worklet"){e.forEach(e=>this.note(e));this.triggerChord=e}},free(){for(let e of this.voices)e.free()}}},{}],117:[function(e,t,s){const n=e("genish.js");const i=e("../workletProxy.js");t.exports=function(e){const t=(s,n,a)=>{const r=Object.create(e.Bus()),o=Object.create(e.Bus2());Object.assign(r,e.mixins.polyinstrument);Object.assign(o,e.mixins.polyinstrument);const l=l=>{const u=Object.assign({},{isStereo:true},l);const c=u.isStereo===true?Object.create(o):Object.create(r);Object.assign(c,{voices:[],maxVoices:u.maxVoices!==undefined?u.maxVoices:16,voiceCount:0,envCheck:a,id:e.factory.getUID(),dirty:true,type:"bus",ugenName:"poly"+s.name+"_"+c.id,inputs:[],inputNames:[],properties:u});u.panVoices=u.isStereo;c.callback.ugenName=c.ugenName;for(let e=0;e<c.maxVoices;e++){c.voices[e]=s(u);c.voices[e].callback.ugenName=c.voices[e].ugenName;c.voices[e].isConnected=false}let m;if(u.isStereo===false){m=n.slice(0);const e=m.indexOf("pan");if(e>-1)m.splice(e,1)}t.setupProperties(c,s,u.isStereo?n:m);return i(["instruments","Poly"+s.name],u,c)};return l};t.setupProperties=function(e,t,s){for(let n of s){Object.defineProperty(e,n,{get(){return e.properties[n]||t.defaults[n]},set(t){e.properties[n]=t;for(let s of e.inputs){s[n]=t}}})}};return t}},{"../workletProxy.js":138,"genish.js":37}],118:[function(e,t,s){const n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=Object.create(i);Object.assign(t,{note(e){this.rate=e;if(e>0){this.trigger()}else{this.__phase__.value=this.data.buffer.length-1}}});const s=i=>{const a=Object.create(t);const r=Object.assign({onload:null},s.defaults,i);a.isStereo=r.isStereo!==undefined?r.isStereo:false;const o=n.in("start"),l=n.in("end"),u=n.in("rate"),c=n.in("loops");a.callback=function(){return 0};a.id=e.factory.getUID();a.ugenName=a.callback.ugenName="sampler_"+a.id;a.inputNames=[];a.__bang__=n.bang();a.trigger=a.__bang__.trigger;Object.assign(a,r);if(r.filename){a.data=n.data(r.filename);a.data.onload=(()=>{a.__phase__=n.counter(u,o,l,a.__bang__,c,{shouldWrap:false});e.factory(a,n.mul(n.ifelse(n.and(n.gte(a.__phase__,o),n.lt(a.__phase__,l)),n.peek(a.data,a.__phase__,{mode:"samples"}),0),n.in("gain")),"sampler",r);if(a.end===-999999999)a.end=a.data.buffer.length-1;if(a.onload!==null){a.onload()}e.dirty(a)})}return a};s.defaults={gain:1,pan:.5,rate:1,panVoices:false,loops:0,start:0,end:-999999999};const a=function(t,s){const n=()=>{const i=e.memory.heap[t.__phase__.memory.value.idx];if(t.rate>0&&i>t.end||t.rate<0&&i<0){s.disconnectUgen.call(s,t);t.isConnected=false}else{e.blockCallbacks.push(n)}};return n};const r=e.PolyTemplate(s,["rate","pan","gain","start","end","loops"],a);return[s,r]}},{"./instrument.js":111,"genish.js":37}],119:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=s=>{let a=Object.create(i),r=n.in("decay"),o=n.mul(r,n.gen.samplerate*2),l=n.in("snappy"),u=n.in("tune"),c=n.in("gain");let m=Object.assign({},t.defaults,s);let d=n.decay(o,{initValue:0}),f=n.memo(n.gt(d,5e-4)),p=n.mul(n.noise(),d),h=n.svf(p,n.add(1e3,n.mul(n.add(1,u),1e3)),.5,1,false),g=n.gtp(n.mul(h,l),0),j=n.svf(d,n.mul(180,n.add(u,1)),.05,2,false),b=n.svf(d,n.mul(330,n.add(u,1)),.05,2,false),y=n.memo(n.add(g,j,n.mul(b,.8))),x=n.mul(y,c);let v=n.switch(f,x,0);a.env=d;a=e.factory(a,v,["instruments","snare"],m);return a};t.defaults={gain:1,frequency:1e3,tune:0,snappy:1,decay:.1};return t}},{"./instrument.js":111,"genish.js":37}],120:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=s=>{const a=Object.create(i);const r=n.in("frequency"),o=n.in("loudness"),l=n.in("glide"),u=n.slide(r,l,l),c=n.in("attack"),m=n.in("decay"),d=n.in("sustain"),f=n.in("sustainLevel"),p=n.in("release");const h=Object.assign({},t.defaults,s);Object.assign(a,h);a.__createGraph=function(){const t=e.oscillators.factory(a.waveform,u,a.antialias);const s=e.envelopes.factory(h.useADSR,h.shape,c,m,d,f,p,h.triggerRelease);let i=n.mul(n.mul(t,s,o)),l;const g=n.mul(n.in("cutoff"),r);const j=n.mul(n.mul(g,n.pow(2,n.in("filterMult"))),s);const b=e.filters.factory(i,j,n.in("Q"),n.in("saturation"),h);let y=n.mul(b,n.in("gain"));if(a.panVoices===true){l=n.pan(y,y,n.in("pan"));a.graph=[l.left,l.right]}else{a.graph=y}a.env=s;a.osc=t;a.filter=b};a.__requiresRecompilation=["waveform","antialias","filterType","filterMode","useADSR","shape"];a.__createGraph();const g=e.factory(a,a.graph,["instruments","synth"],h);return g};t.defaults={waveform:"saw",attack:44,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:false,shape:"linear",triggerRelease:false,gain:1,pulsewidth:.25,frequency:220,pan:.5,antialias:false,panVoices:false,loudness:1,glide:1,saturation:1,filterMult:2,Q:.25,cutoff:.5,filterType:0,filterMode:0,isLowPass:1};let s=e.PolyTemplate(t,["frequency","attack","decay","pulsewidth","pan","gain","glide","saturation","filterMult","Q","cutoff","resonance","antialias","filterType","waveform","filterMode"]);return[t,s]}},{"./instrument.js":111,"genish.js":37}],121:[function(e,t,s){const n=e("../ugen.js");const i=e("../workletProxy.js");t.exports=function(e){let t={export(e){for(let s in t){if(s!=="export"){e[s]=t[s]}}},Add(...t){const s=e.factory.getUID();const a=Object.create(n);Object.assign(a,{isop:true,op:"+",inputs:t,ugenName:"add"+s,id:s});return i(["binops","Add"],{isop:true,inputs:t},a)},Sub(...t){const s=e.factory.getUID();const a=Object.create(n);Object.assign(a,{isop:true,op:"-",inputs:t,ugenName:"sub"+s,id:s});return i(["binops","Sub"],{isop:true,inputs:t},a)},Mul(...t){const s=e.factory.getUID();const a=Object.create(n);Object.assign(a,{isop:true,op:"*",inputs:t,ugenName:"mul"+s,id:s});return i(["binops","Mul"],{isop:true,inputs:t},a)},Div(...t){const s=e.factory.getUID();const a=Object.create(n);Object.assign(a,{isop:true,op:"/",inputs:t,ugenName:"div"+s,id:s});return i(["binops","Div"],{isop:true,inputs:t},a)},Mod(...t){const s=e.factory.getUID();const a=Object.create(n);Object.assign(a,{isop:true,op:"%",inputs:t,ugenName:"mod"+s,id:s});return i(["binops","Mod"],{isop:true,inputs:t},a)}};return t}},{"../ugen.js":135,"../workletProxy.js":138}],122:[function(e,t,s){let n=e("genish.js"),i=e("../ugen.js"),a=e("../workletProxy.js");t.exports=function(e){const t=Object.create(i);Object.assign(t,{__gain:{set(t){this.mul.inputs[1]=t;e.dirty(this)},get(){return this.mul[1]}},__addInput(t){this.sum.inputs.push(t);e.dirty(this)},create(s){const n=Object.assign({},t.defaults,s);const i=e.binops.Add(...n.inputs);const r=e.binops.Mul(i,n.gain);const o=e.Panner({input:r,pan:n.pan});o.sum=i;o.mul=r;o.disconnectUgen=t.disconnectUgen;Object.defineProperty(o,"gain",t.__gain);o.__properties__=n;const l=a(["Bus"],n,o);if(false&&e.preventProxy===false&&e.mode==="worklet"){const t={address:"add",name:["Bus"],props:n,id:o.id};e.worklet.port.postMessage(t);e.worklet.port.postMessage({address:"method",object:o.id,name:"connect",args:[]})}return l},disconnectUgen(t){let s=this.sum.inputs.indexOf(t);if(s!==-1){this.sum.inputs.splice(s,1);e.dirty(this)}},defaults:{gain:1,inputs:[0],pan:.5}});return t.create.bind(t)}},{"../ugen.js":135,"../workletProxy.js":138,"genish.js":37}],123:[function(e,t,s){const n=e("genish.js"),i=e("../ugen.js"),a=e("../workletProxy.js");t.exports=function(e){const t=Object.create(i);let s,n;Object.assign(t,{create(i){if(s===undefined){s=e.genish.gen.globals.panL.memory.values.idx;n=e.genish.gen.globals.panR.memory.values.idx}var r=[0,0];var o=Object.create(t);Object.assign(o,{callback(){r[0]=r[1]=0;var e=arguments.length-1;var t=arguments[e];for(var i=0;i<e;i++){var a=arguments[i],l=Array.isArray(a);r[0]+=l?a[0]:a;r[1]+=l?a[1]:a}var u=.5*1023,c=u|0,m=c+1&1023,d=u-c,f=t[s+c]+d*(t[s+m]-t[s+c]),p=t[n+c]+d*(t[n+m]-t[n+c]);r[0]*=o.gain*f;r[1]*=o.gain*p;return r},id:e.factory.getUID(),dirty:false,type:"bus",inputs:[],__properties__:i},t.defaults,i);o.ugenName=o.callback.ugenName="bus2_"+o.id;const l=a(["Bus2"],i,o);return l},disconnectUgen(t){let s=this.inputs.indexOf(t);if(s!==-1){this.inputs.splice(s,1);e.dirty(this)}},defaults:{gain:1,pan:.5}});return t.create.bind(t)}},{"../ugen.js":135,"../workletProxy.js":138,"genish.js":37}],124:[function(e,t,s){const n=e("genish.js"),i=e("../ugen.js");t.exports=function(e){const t={export(e){for(let s in t){if(s!=="export"){e[s]=t[s]}}},Abs(s){const a=Object.create(i);const r=n.abs(n.in("input"));const o=e.factory(a,r,["monops","abs"],Object.assign({},t.defaults,{inputs:[s],isop:true}));return o},Pow(s,a){const r=Object.create(i);const o=n.pow(n.in("input"),n.in("exponent"));e.factory(r,o,["monops","pow"],Object.assign({},t.defaults,{inputs:[s],exponent:a,isop:true}));return r},Clamp(s,a,r){const o=Object.create(i);const l=n.clamp(n.in("input"),n.in("min"),n.in("max"));const u=e.factory(o,l,["monops","clamp"],Object.assign({},t.defaults,{inputs:[s],isop:true,min:a,max:r}));return u},Merge(t){const s=Object.create(i);const a=function(e){return e[0]+e[1]};e.factory(s,n.in("input"),["monops","merge"],{inputs:[t],isop:true},a);s.type="analysis";s.inputNames=["input"];s.inputs=[t];s.input=t;return s}};t.defaults={input:0};return t}},{"../ugen.js":135,"genish.js":37}],125:[function(e,t,s){const n=e("genish.js");const i=e("../ugen.js");t.exports=function(e){let t=s=>{const a=Object.assign({},t.defaults,s),r=Object.create(i);const o=a.input.isStereo!==undefined?a.input.isStereo:Array.isArray(a.input);const l=n.in("input"),u=n.in("pan");let c;if(o){c=n.pan(l[0],l[1],u)}else{c=n.pan(l,l,u)}e.factory(r,[c.left,c.right],"panner",a);return r};t.defaults={input:0,pan:.5};return t}},{"../ugen.js":135,"genish.js":37}],126:[function(e,t,s){t.exports=function(e){const t={bpm:120,export:function(e){Object.assign(e,t)},ms:function(t){return t*e.ctx.sampleRate/1e3},seconds:function(t){return t*e.ctx.sampleRate},beats:function(t){return function(){var s=e.ctx.sampleRate/(e.Time.bpm/60);return s*t}}};return t}},{}],127:[function(e,t,s){const n=e("genish.js"),i=n.history,a=n.noise;t.exports=function(){"use jsdsp";const e=i(0);const t=n.sub(n.mul(a(),2),1);let s=n.add(e.out,n.div(n.mul(.02,t),1.02));e.in(s);s=n.mul(s,3.5);return s}},{"genish.js":37}],128:[function(e,t,s){let n=e("genish.js");let i=function(e,t,s=.5,i){if(i===undefined)i={type:0};let a=n.history(),r=n.memo(n.div(e,n.gen.samplerate)),o=n.sub(-.5,r),l=n.mul(n.mul(13,t),n.pow(o,5)),u=n.sub(.376,n.mul(r,.752)),c=n.sub(1,n.mul(2,r)),m=n.accum(r,0,{min:-1}),d,f;d=n.memo(n.mul(n.add(a.out,n.sin(n.mul(Math.PI*2,n.memo(n.add(m,n.mul(a.out,l)))))),.5));a.in(d);if(i.type===1){const e=n.history();const t=n.history();const i=n.mul(n.add(e.out,n.sin(n.mul(Math.PI*2,n.memo(n.add(m,n.mul(e.out,l),s))))),.5);e.in(i);f=n.memo(n.sub(a.out,e.out));f=n.memo(n.add(n.mul(2.5,f),n.mul(-1.5,t.out)));t.in(n.sub(d,i))}else{d=n.add(n.mul(2.5,d),n.mul(-1.5,a.out));d=n.add(d,u);f=d}return n.mul(f,c)};t.exports=i},{"genish.js":37}],129:[function(e,t,s){const n=e("genish.js"),i=e("../ugen.js"),a=e("./fmfeedbackosc.js");t.exports=function(t){let s={export(e){for(let t in s){if(t!=="export"){e[t]=s[t]}}},genish:{Brown:e("./brownnoise.js"),Pink:e("./pinknoise.js")},Wavetable:e("./wavetable.js")(t),Square(e){const a=Object.create(i);const r=Object.assign({antialias:false},s.defaults,e);const o=s.factory("square",n.in("frequency"),r.antialias);const l=n.mul(o,n.in("gain"));const u=t.factory(a,l,["oscillators","square"],r);return u},Triangle(e){const a=Object.create(i);const r=Object.assign({antialias:false},s.defaults,e);const o=s.factory("triangle",n.in("frequency"),r.antialias);const l=n.mul(o,n.in("gain"));const u=t.factory(a,l,["oscillators","triangle"],r);return u},PWM(e){const a=Object.create(i);const r=Object.assign({antialias:false,pulsewidth:.25},s.defaults,e);const o=s.factory("pwm",n.in("frequency"),r.antialias);const l=n.mul(o,n.in("gain"));const u=t.factory(a,l,["oscillators","PWM"],r);return u},Sine(e){const a=Object.create(i);const r=Object.assign({},s.defaults,e);const o=n.mul(n.cycle(n.in("frequency")),n.in("gain"));const l=t.factory(a,o,["oscillators","sine"],r);return l},Noise(e){const a=Object.create(i);const r=Object.assign({},{gain:1,color:"white"},e);let o;switch(r.color){case"brown":o=n.mul(s.genish.Brown(),n.in("gain"));break;case"pink":o=n.mul(s.genish.Pink(),n.in("gain"));break;default:o=n.mul(n.noise(),n.in("gain"));break}const l=t.factory(a,o,["oscillators","noise"],r);return l},Saw(e){const a=Object.create(i);const r=Object.assign({antialias:false},s.defaults,e);const o=s.factory("saw",n.in("frequency"),r.antialias);const l=n.mul(o,n.in("gain"));const u=t.factory(a,l,["oscillators","saw"],r);return u},ReverseSaw(e){const a=Object.create(i);const r=Object.assign({antialias:false},s.defaults,e);const o=n.sub(1,s.factory("saw",n.in("frequency"),r.antialias));const l=n.mul(o,n.in("gain"));const u=t.factory(a,l,["oscillators","ReverseSaw"],r);return u},factory(e,t,i=false){let r;switch(e){case"pwm":let o=n.in("pulsewidth");if(i===true){r=a(t,1,o,{type:1})}else{let e=n.phasor(t,0,{min:0});r=n.lt(e,o)}break;case"saw":if(i===false){r=n.phasor(t)}else{r=a(t,1)}break;case"sine":r=n.cycle(t);break;case"square":if(i===true){r=a(t,1,.5,{type:1})}else{r=n.wavetable(t,{buffer:s.Square.buffer,name:"square"})}break;case"triangle":r=n.wavetable(t,{buffer:s.Triangle.buffer,name:"triangle"});break}return r}};s.Square.buffer=new Float32Array(1024);for(let e=1023;e>=0;e--){s.Square.buffer[e]=e/1024>.5?1:-1}s.Triangle.buffer=new Float32Array(1024);for(let e=1024;e--;e=e){s.Triangle.buffer[e]=1-4*Math.abs((e/1024+.25)%1-.5)}s.defaults={frequency:440,gain:1};return s}},{"../ugen.js":135,"./brownnoise.js":127,"./fmfeedbackosc.js":128,"./pinknoise.js":130,"./wavetable.js":131,"genish.js":37}],130:[function(e,t,s){const n=e("genish.js"),i=n.history,a=n.data,r=n.noise;t.exports=function(){"use jsdsp";const e=a(8,1,{meta:true});const t=n.sub(n.mul(r(),2),1);e[0]=n.add(n.mul(.99886,e[0]),n.mul(t,.0555179));e[1]=n.add(n.mul(.99332,e[1]),n.mul(t,.0750579));e[2]=n.add(n.mul(.969,e[2]),n.mul(t,.153852));e[3]=n.add(n.mul(.8865,e[3]),n.mul(t,.3104856));e[4]=n.add(n.mul(.55,e[4]),n.mul(t,.5329522));e[5]=n.sub(n.mul(-.7616,e[5]),n.mul(t,.016898));const s=n.mul(n.add(n.add(n.add(n.add(n.add(n.add(n.add(e[0],e[1]),e[2]),e[3]),e[4]),e[5]),e[6]),n.mul(t,.5362)),.11);e[6]=n.mul(t,.115926);return s}},{"genish.js":37}],131:[function(e,t,s){let n=e("genish.js"),i=e("../ugen.js");t.exports=function(e){const t=function(t){const s=Object.create(i);const a=Object.assign({},e.oscillators.defaults,t);const r=n.wavetable(n.in("frequency"),a);const o=n.mul(r,n.in("gain"));e.factory(s,o,"wavetable",a);return s};n.wavetable=function(e,t){let s={immutable:true};if(t.name!==undefined)s.global=t.name;const i=n.data(t.buffer,1,s);return n.peek(i,n.phasor(e,0,{min:0}))};return t}},{"../ugen.js":135,"genish.js":37}],132:[function(e,t,s){const n=e("../external/priorityqueue.js");const i=e("big.js");let a={phase:0,queue:new n((e,t)=>{if(e.time===t.time){return t.priority-e.priority}else{return e.time-t.time}}),clear(){this.queue.data.length=0;this.queue.length=0},add(e,t,s=0){e+=this.phase;this.queue.push({time:e,func:t,priority:s})},tick(){if(this.queue.length){let e=this.queue.peek();while(this.phase>=e.time){e.func();this.queue.pop();e=this.queue.peek();if(e===undefined)break}}this.phase++}};t.exports=a},{"../external/priorityqueue.js":83,"big.js":139}],133:[function(e,t,s){const n=e("genish.js"),i=e("../workletProxy.js"),a=e("../ugen.js");t.exports=function(e){const t=Object.create(a);Object.assign(t,{start(){this.connect();return this},stop(){this.disconnect();return this}});const s={create(n){const a=Object.create(t),r=Object.assign({},s.defaults,n);a.phase=0;a.inputNames=["rate"];a.inputs=[1];a.nextTime=0;a.valuesPhase=0;a.timingsPhase=0;a.id=e.factory.getUID();a.dirty=true;a.type="seq";a.__properties__=r;if(r.target===undefined){a.anonFunction=true}else{a.anonFunction=false;a.callFunction=typeof r.target[r.key]==="function"}r.id=e.factory.getUID();const o=Object.assign({},s.defaults,r);Object.assign(a,o);a.__properties__=o;a.callback=function(e){if(a.phase>=a.nextTime){let e=a.values[a.valuesPhase++%a.values.length];if(a.anonFunction||typeof e==="function")e=e();if(a.anonFunction===false){if(a.callFunction===false){a.target[a.key]=e}else{a.target[a.key](e)}}a.phase-=a.nextTime;let t=a.timings[a.timingsPhase++%a.timings.length];if(typeof t==="function")t=t();a.nextTime=t}a.phase+=e;return 0};a.ugenName=a.callback.ugenName="seq_"+a.id;let l=a.rate;Object.defineProperty(a,"rate",{get(){return l},set(t){if(l!==t){e.dirty(a);l=t}}});return i(["Sequencer2"],r,a)}};s.defaults={rate:1};return s.create}},{"../ugen.js":135,"../workletProxy.js":138,"genish.js":37}],134:[function(e,t,s){const n=e("../external/priorityqueue.js");const i=e("big.js");const a=e("../workletProxy.js");t.exports=function(e){let t=s=>{let n;let i={__isRunning:false,__valuesPhase:0,__timingsPhase:0,__type:"seq",tick(){let t=i.values[i.__valuesPhase++%i.values.length],s=i.timings[i.__timingsPhase++%i.timings.length];if(typeof s==="function")s=s();if(typeof t==="function"&&i.target===undefined){t()}else if(typeof i.target[i.key]==="function"){if(typeof t==="function")t=t();i.target[i.key](t)}else{if(typeof t==="function")t=t();i.target[i.key]=t}if(i.__isRunning===true){e.scheduler.add(s,i.tick,i.priority)}},start(t=0){i.__isRunning=true;e.scheduler.add(t,i.tick,i.priority);return n},stop(){i.__isRunning=false;return n}};s.id=e.factory.getUID();const r=Object.assign({},t.defaults,s);Object.assign(i,r);i.__properties__=r;n=a(["Sequencer"],r,i);return n};t.defaults={priority:0,values:[],timings:[]};t.make=function(e,s,n,i){return t({values:e,timings:s,target:n,key:i})};return t}},{"../external/priorityqueue.js":83,"../workletProxy.js":138,"big.js":139}],135:[function(e,t,s){const n=e=>{if(typeof e==="object"){if(e.id!==undefined){return processor.ugens.get(e.id)}}return e};let i={free:function(){Gibberish.genish.gen.free(this.graph)},print:function(){console.log(this.callback.toString())},connect:function(e,t=1){if(this.connected===undefined)this.connected=[];let s=t===1?this:Gibberish.binops.Mul(this,t);if(e===undefined||e===null)e=Gibberish.output;if(typeof e.__addInput=="function"){e.__addInput(s)}else if(e.sum&&e.sum.inputs){e.sum.inputs.push(s)}else if(e.inputs){e.inputs.push(s)}else{e.input=s}Gibberish.dirty(e);this.connected.push([e,s]);return this},disconnect:function(e){if(e===undefined){for(let e of this.connected){e[0].disconnectUgen(e[1])}this.connected.length=0}else{const t=this.connected.find(t=>t[0]===e);e.disconnectUgen(t[1]);const s=this.connected.indexOf(t);this.connected.splice(s,1)}},chain:function(e,t=1){this.connect(e,t);return e},__redoGraph:function(){this.__createGraph();this.callback=Gibberish.genish.gen.createCallback(this.graph,Gibberish.memory,false,true);this.inputNames=new Set(Gibberish.genish.gen.parameters);this.callback.ugenName=this.ugenName;Gibberish.dirty(this)}};t.exports=i},{}],136:[function(e,t,s){const n=e("./workletProxy.js");const i=e("./fx/effect.js");t.exports=function(e){let t=0;const s=function(t,a,r,o,l=null,u=true){t.callback=l===null?e.genish.gen.createCallback(a,e.memory,false,true):l;let c=Array.isArray(r)?r[r.length-1]:r;Object.assign(t,{type:"ugen",id:s.getUID(),ugenName:c+"_",graph:a,inputNames:new Set(e.genish.gen.parameters),isStereo:Array.isArray(a),dirty:true,__properties__:o});t.ugenName+=t.id;t.callback.ugenName=t.ugenName;for(let s of t.inputNames){if(s==="memory")continue;let n=o[s];let i=Object.getOwnPropertyDescriptor(t,s),a;if(i!==undefined){a=i.set}Object.defineProperty(t,s,{get(){return n},set(s){if(n!==s){e.dirty(t);if(a!==undefined)a(s);n=s}}})}if(i.isPrototypeOf(t)){let s=t.bypass;Object.defineProperty(t,"bypass",{get(){return s},set(n){if(s!==n){e.dirty(t);s=n}}})}if(t.__requiresRecompilation!==undefined){t.__requiresRecompilation.forEach(s=>{let n=t[s];Object.defineProperty(t,s,{get(){return n},set(t){if(n!==t){n=t;o[s]=t;if(e.mode!=="worklet")console.log("redoing graph!",t);this.__redoGraph()}}})})}return u?n(r,o,t):t};s.getUID=(()=>t++);return s}},{"./fx/effect.js":99,"./workletProxy.js":138}],137:[function(e,t,s){let n=e("genish.js");t.exports=function(e){let t={createContext(s,i,a){let r=typeof AudioContext==="undefined"?webkitAudioContext:AudioContext;let o=()=>{if(typeof r!=="undefined"){e.ctx=s===undefined?new r:s;n.gen.samplerate=e.ctx.sampleRate;n.utilities.ctx=e.ctx;if(document&&document.documentElement&&"ontouchstart"in document.documentElement){window.removeEventListener("touchstart",o);if("ontouchstart"in document.documentElement){let e=t.ctx.createBufferSource();e.connect(t.ctx.destination);e.noteOn(0)}}else{window.removeEventListener("mousedown",o)}}if(typeof i==="function")i(a)};if(document&&document.documentElement&&"ontouchstart"in document.documentElement){window.addEventListener("touchstart",o)}else{window.addEventListener("mousedown",o)}return e.ctx},createScriptProcessor(t){e.node=e.ctx.createScriptProcessor(1024,0,2),e.clearFunction=function(){return 0},e.callback=e.clearFunction;e.node.onaudioprocess=function(t){let s=e,n=s.callback,i=t.outputBuffer,a=e.scheduler,r;let o=i.getChannelData(0),l=i.getChannelData(1);let u=e.blockCallbacks.length;if(u!==0){for(let t=0;t<u;t++){e.blockCallbacks[t]()}e.blockCallbacks.splice(0,u)}for(let e=0,t=o.length;e<t;e++){a.tick();if(s.graphIsDirty){n=s.generateCallback()}let t=n.apply(null,s.callbackUgens);o[e]=t[0];l[e]=t[1]}};e.node.connect(e.ctx.destination);t();return e.node},createWorklet(t){e.ctx.audioWorklet.addModule(e.workletPath).then(()=>{e.worklet=new AudioWorkletNode(e.ctx,"gibberish",{outputChannelCount:[2]});e.worklet.connect(e.ctx.destination);e.worklet.port.onmessage=(t=>{switch(t.data.address){case"get":let s=t.data.name;let n;if(s[0]==="Gibberish"){n=e;s.shift()}for(let e of s){n=n[e]}e.worklet.port.postMessage({address:"set",name:"Gibberish."+s.join("."),value:n});break;case"state":const i=t.data.messages;if(i.length===0)return;e.preventProxy=true;for(let t=0;t<i.length;t+=3){const s=i[t];const n=i[t+1];const a=i[t+2];const r=e.worklet.ugens.get(s);r[n]=a}e.preventProxy=false;break}});e.worklet.ugens=new Map;t()})},wrap(e,...t){const s={action:"wrap",value:e,args:t.map(e=>{return{id:e.id}})};return s},export(e){e.wrap=this.wrap}};return t}},{"genish.js":37}],138:[function(e,t,s){const n=e("serialize-javascript");const i=e=>{if(typeof e==="object"&&e.id!==undefined){if(e.__type!=="seq"){return{id:e.id,prop:e.prop}}else{return n(e)}}return e};const a=function(e,t,s){const a={};for(let e in t){if(typeof t[e]==="object"&&t[e].__meta__!==undefined){a[e]=t[e].__meta__}else if(Array.isArray(t[e])){const s=[];for(let n=0;n<t[e].length;n++){s[n]=i(t[e][n])}a[e]=s}else if(typeof t[e]==="object"){a[e]=i(t[e])}else{a[e]=t[e]}}let r=n(a);if(Array.isArray(e)){const t=e[e.length-1];e[e.length-1]=t[0].toUpperCase()+t.substring(1)}else{e=[e[0].toUpperCase()+e.substring(1)]}s.__meta__={address:"add",name:e,properties:r,id:s.id};Gibberish.worklet.ugens.set(s.id,s);Gibberish.worklet.port.postMessage(s.__meta__)};t.exports=function(e,t,s){if(Gibberish.mode==="worklet"&&Gibberish.preventProxy===false){a(e,t,s);const n=new Proxy(s,{get(e,t,n){if(typeof e[t]==="function"&&t.indexOf("__")===-1){const n=new Proxy(e[t],{apply(n,a,r){const o=r.map(i);Gibberish.worklet.port.postMessage({address:"method",object:s.id,name:t,args:o});return e[t].apply(a,r)}});return n}return e[t]},set(e,t,n,a){if(t!=="connected"){const e=i(n);Gibberish.worklet.port.postMessage({address:"set",object:s.id,name:t,value:e})}e[t]=n}});return n}else if(Gibberish.mode==="processor"&&Gibberish.preventProxy===false){const e=new Proxy(s,{set(e,t,n,i){if(t.indexOf("__")===-1){if(Gibberish.processor!==undefined)Gibberish.processor.messages.push(s.id,t,n)}e[t]=n;return true}});return e}return s}},{"serialize-javascript":140}],139:[function(t,s,n){(function(t){"use strict";var n=20,i=1,a=1e6,r=1e6,o=-7,l=21,u={},c=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m;function d(){function e(t){var s=this;if(!(s instanceof e)){return t===void 0?d():new e(t)}if(t instanceof e){s.s=t.s;s.e=t.e;s.c=t.c.slice()}else{p(s,t)}s.constructor=e}e.prototype=u;e.DP=n;e.RM=i;e.E_NEG=o;e.E_POS=l;return e}function f(e,t,s){var n=e.constructor,i=t-(e=new n(e)).e,a=e.c;if(a.length>++t){h(e,i,n.RM)}if(!a[0]){++i}else if(s){i=t}else{a=e.c;i=e.e+i+1}for(;a.length<i;a.push(0)){}i=e.e;return s===1||s&&(t<=i||i<=n.E_NEG)?(e.s<0&&a[0]?"-":"")+(a.length>1?a[0]+"."+a.join("").slice(1):a[0])+(i<0?"e":"e+")+i:e.toString()}function p(e,t){var s,n,i;if(t===0&&1/t<0){t="-0"}else if(!c.test(t+="")){g(NaN)}e.s=t.charAt(0)=="-"?(t=t.slice(1),-1):1;if((s=t.indexOf("."))>-1){t=t.replace(".","")}if((n=t.search(/e/i))>0){if(s<0){s=n}s+=+t.slice(n+1);t=t.substring(0,n)}else if(s<0){s=t.length}for(n=0;t.charAt(n)=="0";n++){}if(n==(i=t.length)){e.c=[e.e=0]}else{for(;t.charAt(--i)=="0";){}e.e=s-n-1;e.c=[];for(s=0;n<=i;e.c[s++]=+t.charAt(n++)){}}return e}function h(e,t,s,n){var i,a=e.c,r=e.e+t+1;if(s===1){n=a[r]>=5}else if(s===2){n=a[r]>5||a[r]==5&&(n||r<0||a[r+1]!==i||a[r-1]&1)}else if(s===3){n=n||a[r]!==i||r<0}else{n=false;if(s!==0){g("!Big.RM!")}}if(r<1||!a[0]){if(n){e.e=-t;e.c=[1]}else{e.c=[e.e=0]}}else{a.length=r--;if(n){for(;++a[r]>9;){a[r]=0;if(!r--){++e.e;a.unshift(1)}}}for(r=a.length;!a[--r];a.pop()){}}return e}function g(e){var t=new Error(e);t.name="BigError";throw t}u.abs=function(){var e=new this.constructor(this);e.s=1;return e};u.cmp=function(e){var t,s=this,n=s.c,i=(e=new s.constructor(e)).c,a=s.s,r=e.s,o=s.e,l=e.e;if(!n[0]||!i[0]){return!n[0]?!i[0]?0:-r:a}if(a!=r){return a}t=a<0;if(o!=l){return o>l^t?1:-1}a=-1;r=(o=n.length)<(l=i.length)?o:l;for(;++a<r;){if(n[a]!=i[a]){return n[a]>i[a]^t?1:-1}}return o==l?0:o>l^t?1:-1};u.div=function(e){var t=this,s=t.constructor,n=t.c,i=(e=new s(e)).c,r=t.s==e.s?1:-1,o=s.DP;if(o!==~~o||o<0||o>a){g("!Big.DP!")}if(!n[0]||!i[0]){if(n[0]==i[0]){g(NaN)}if(!i[0]){g(r/0)}return new s(r*0)}var l,u,c,m,d,f,p=i.slice(),j=l=i.length,b=n.length,y=n.slice(0,l),x=y.length,v=e,$=v.c=[],_=0,k=o+(v.e=t.e-e.e)+1;v.s=r;r=k<0?0:k;p.unshift(0);for(;x++<l;y.push(0)){}do{for(c=0;c<10;c++){if(l!=(x=y.length)){m=l>x?1:-1}else{for(d=-1,m=0;++d<l;){if(i[d]!=y[d]){m=i[d]>y[d]?1:-1;break}}}if(m<0){for(u=x==l?i:p;x;){if(y[--x]<u[x]){d=x;for(;d&&!y[--d];y[d]=9){}--y[d];y[x]+=10}y[x]-=u[x]}for(;!y[0];y.shift()){}}else{break}}$[_++]=m?c:++c;if(y[0]&&m){y[x]=n[j]||0}else{y=[n[j]]}}while((j++<b||y[0]!==f)&&r--);if(!$[0]&&_!=1){$.shift();v.e--}if(_>k){h(v,o,s.RM,y[0]!==f)}return v};u.eq=function(e){return!this.cmp(e)};u.gt=function(e){return this.cmp(e)>0};u.gte=function(e){return this.cmp(e)>-1};u.lt=function(e){return this.cmp(e)<0};u.lte=function(e){return this.cmp(e)<1};u.sub=u.minus=function(e){var t,s,n,i,a=this,r=a.constructor,o=a.s,l=(e=new r(e)).s;if(o!=l){e.s=-l;return a.plus(e)}var u=a.c.slice(),c=a.e,m=e.c,d=e.e;if(!u[0]||!m[0]){return m[0]?(e.s=-l,e):new r(u[0]?a:0)}if(o=c-d){if(i=o<0){o=-o;n=u}else{d=c;n=m}n.reverse();for(l=o;l--;n.push(0)){}n.reverse()}else{s=((i=u.length<m.length)?u:m).length;for(o=l=0;l<s;l++){if(u[l]!=m[l]){i=u[l]<m[l];break}}}if(i){n=u;u=m;m=n;e.s=-e.s}if((l=(s=m.length)-(t=u.length))>0){for(;l--;u[t++]=0){}}for(l=t;s>o;){if(u[--s]<m[s]){for(t=s;t&&!u[--t];u[t]=9){}--u[t];u[s]+=10}u[s]-=m[s]}for(;u[--l]===0;u.pop()){}for(;u[0]===0;){u.shift();--d}if(!u[0]){e.s=1;u=[d=0]}e.c=u;e.e=d;return e};u.mod=function(e){var t,s=this,n=s.constructor,i=s.s,a=(e=new n(e)).s;if(!e.c[0]){g(NaN)}s.s=e.s=1;t=e.cmp(s)==1;s.s=i;e.s=a;if(t){return new n(s)}i=n.DP;a=n.RM;n.DP=n.RM=0;s=s.div(e);n.DP=i;n.RM=a;return this.minus(s.times(e))};u.add=u.plus=function(e){var t,s=this,n=s.constructor,i=s.s,a=(e=new n(e)).s;if(i!=a){e.s=-a;return s.minus(e)}var r=s.e,o=s.c,l=e.e,u=e.c;if(!o[0]||!u[0]){return u[0]?e:new n(o[0]?s:i*0)}o=o.slice();if(i=r-l){if(i>0){l=r;t=u}else{i=-i;t=o}t.reverse();for(;i--;t.push(0)){}t.reverse()}if(o.length-u.length<0){t=u;u=o;o=t}i=u.length;for(a=0;i;){a=(o[--i]=o[i]+u[i]+a)/10|0;o[i]%=10}if(a){o.unshift(a);++l}for(i=o.length;o[--i]===0;o.pop()){}e.c=o;e.e=l;return e};u.pow=function(e){var t=this,s=new t.constructor(1),n=s,i=e<0;if(e!==~~e||e<-r||e>r){g("!pow!")}e=i?-e:e;for(;;){if(e&1){n=n.times(t)}e>>=1;if(!e){break}t=t.times(t)}return i?s.div(n):n};u.round=function(e,t){var s=this,n=s.constructor;if(e==null){e=0}else if(e!==~~e||e<0||e>a){g("!round!")}h(s=new n(s),e,t==null?n.RM:t);return s};u.sqrt=function(){var e,t,s,n=this,i=n.constructor,a=n.c,r=n.s,o=n.e,l=new i("0.5");if(!a[0]){return new i(n)}if(r<0){g(NaN)}r=Math.sqrt(n.toString());if(r===0||r===1/0){e=a.join("");if(!(e.length+o&1)){e+="0"}t=new i(Math.sqrt(e).toString());t.e=((o+1)/2|0)-(o<0||o&1)}else{t=new i(r.toString())}r=t.e+(i.DP+=4);do{s=t;t=l.times(s.plus(n.div(s)))}while(s.c.slice(0,r).join("")!==t.c.slice(0,r).join(""));h(t,i.DP-=4,i.RM);return t};u.mul=u.times=function(e){var t,s=this,n=s.constructor,i=s.c,a=(e=new n(e)).c,r=i.length,o=a.length,l=s.e,u=e.e;e.s=s.s==e.s?1:-1;if(!i[0]||!a[0]){return new n(e.s*0)}e.e=l+u;if(r<o){t=i;i=a;a=t;u=r;r=o;o=u}for(t=new Array(u=r+o);u--;t[u]=0){}for(l=o;l--;){o=0;for(u=r+l;u>l;){o=t[u]+a[l]*i[u-l-1]+o;t[u--]=o%10;o=o/10|0}t[u]=(t[u]+o)%10}if(o){++e.e}if(!t[0]){t.shift()}for(l=t.length;!t[--l];t.pop()){}e.c=t;return e};u.toString=u.valueOf=u.toJSON=function(){var e=this,t=e.constructor,s=e.e,n=e.c.join(""),i=n.length;if(s<=t.E_NEG||s>=t.E_POS){n=n.charAt(0)+(i>1?"."+n.slice(1):"")+(s<0?"e":"e+")+s}else if(s<0){for(;++s;n="0"+n){}n="0."+n}else if(s>0){if(++s>i){for(s-=i;s--;n+="0"){}}else if(s<i){n=n.slice(0,s)+"."+n.slice(s)}}else if(i>1){n=n.charAt(0)+"."+n.slice(1)}return e.s<0&&e.c[0]?"-"+n:n};u.toExponential=function(e){if(e==null){e=this.c.length-1}else if(e!==~~e||e<0||e>a){g("!toExp!")}return f(this,e,1)};u.toFixed=function(e){var t,s=this,n=s.constructor,i=n.E_NEG,r=n.E_POS;n.E_NEG=-(n.E_POS=1/0);if(e==null){t=s.toString()}else if(e===~~e&&e>=0&&e<=a){t=f(s,s.e+e);if(s.s<0&&s.c[0]&&t.indexOf("-")<0){t="-"+t}}n.E_NEG=i;n.E_POS=r;if(!t){g("!toFix!")}return t};u.toPrecision=function(e){if(e==null){return this.toString()}else if(e!==~~e||e<1||e>a){g("!toPre!")}return f(this,e-1,2)};m=d();if(typeof e==="function"&&e.amd){e(function(){return m})}else if(typeof s!=="undefined"&&s.exports){s.exports=m}else{t.Big=m}})(this)},{}],140:[function(e,t,s){"use strict";var n=Math.floor(Math.random()*1099511627776).toString(16);var i=new RegExp('"@__(F|R|D)-'+n+'-(\\d+)__@"',"g");var a=/\{\s*\[native code\]\s*\}/g;var r=/[<>\/\u2028\u2029]/g;var o={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function l(e){return o[e]}t.exports=function e(t,s){s||(s={});if(typeof s==="number"||typeof s==="string"){s={space:s}}var o=[];var u=[];var c=[];function m(e,t){if(!t){return t}var s=this[e];var i=typeof s;if(i==="object"){if(s instanceof RegExp){return"@__R-"+n+"-"+(u.push(s)-1)+"__@"}if(s instanceof Date){return"@__D-"+n+"-"+(c.push(s)-1)+"__@"}}if(i==="function"){return"@__F-"+n+"-"+(o.push(s)-1)+"__@"}return t}var d;if(s.isJSON&&!s.space){d=JSON.stringify(t)}else{d=JSON.stringify(t,s.isJSON?null:m,s.space)}if(typeof d!=="string"){return String(d)}if(s.unsafe!==true){d=d.replace(r,l)}if(o.length===0&&u.length===0&&c.length===0){return d}return d.replace(i,function(e,t,s){if(t==="D"){return'new Date("'+c[s].toISOString()+'")'}if(t==="R"){return u[s].toString()}var n=o[s];var i=n.toString();if(a.test(i)){throw new TypeError("Serializing native function: "+n.name)}return i})}},{}],141:[function(e,t,s){"use strict";let n={create(e=4096,t=Float32Array){let s=Object.create(this);Object.assign(s,{heap:new t(e),list:{},freeList:{}});return s},alloc(e,t){let s=-1;if(e>this.heap.length){throw Error("Allocation request is larger than heap size of "+this.heap.length)}for(let n in this.freeList){let i=this.freeList[n];if(i.size>=e){s=n;this.list[s]={size:e,immutable:t,references:1};if(i.size!==e){let t=s+e,n;for(let e in this.list){if(e>t){n=e-t;this.freeList[t]=n}}}break}}if(s!==-1)delete this.freeList[s];if(s===-1){let n=Object.keys(this.list),i;if(n.length){i=parseInt(n[n.length-1]);s=i+this.list[i].size}else{s=0}this.list[s]={size:e,immutable:t,references:1}}if(s+e>=this.heap.length){throw Error("No available blocks remain sufficient for allocation request.")}return s},addReference(e){if(this.list[e]!==undefined){this.list[e].references++}},free(e){if(this.list[e]===undefined){throw Error("Calling free() on non-existing block.")}let t=this.list[e];if(t===0)return;t.references--;if(t.references===0&&t.immutable!==true){this.list[e]=0;let t=0;for(let s in this.list){if(s>e){t=s-e;break}}this.freeList[e]=t}}};t.exports=n},{}]},{},[106])(106)});let processor=null;class GibberishProcessor extends AudioWorkletProcessor{static get parameterDescriptors(){}constructor(e){super(e);Gibberish=window.Gibberish;Gibberish.genish.hasWorklet=false;Gibberish.preventProxy=true;Gibberish.init(undefined,undefined,"processor");Gibberish.preventProxy=false;Gibberish.processor=this;this.port.onmessage=this.handleMessage.bind(this);Gibberish.ugens=this.ugens=new Map;this.ugens.set(Gibberish.id,Gibberish);processor=this;this.port.postMessage({address:"get",name:["Gibberish","ctx","sampleRate"]});this.messages=[]}replaceProperties(e){if(Array.isArray(e)){const t=[];for(let s=0;s<e.length;s++){const n=e[s];if(typeof n==="object"&&n.id!==undefined){let e=this.ugens.get(n.id);if(e!==undefined){t[s]=n.prop!==undefined?e[n.prop]:e;if(n.prop!==undefined)console.log("got a ssd.out",n,e)}else{t[s]=n}}else{if(typeof n==="object"&&n.action==="wrap"){t[s]=n.value.bind(null,...this.replaceProperties(n.args));console.log(t[s])}else if(Array.isArray(n)){t[s]=this.replaceProperties(n)}else{t[s]=n}}}return t}else{const t=e;for(let e in t){let s=t[e];if(typeof s==="object"&&s.id!==undefined){let n=this.ugens.get(s.id);if(n!==undefined){t[e]=n}}else if(Array.isArray(s)){t[e]=this.replaceProperties(s)}else{if(typeof s==="object"&&s.action==="wrap"){t[e]=s.value();console.log("returning wrapped value!",t[e])}}}return t}return e}handleMessage(event){if(event.data.address==="add"){const rep=event.data;let constructor=Gibberish;for(let e=0;e<rep.name.length;e++){constructor=constructor[rep.name[e]]}let properties=this.replaceProperties(eval("("+rep.properties+")"));let ugen=properties.isop!==undefined?constructor(...properties.inputs):constructor(properties);if(rep.post){ugen[rep.post]()}this.ugens.set(rep.id,ugen);initialized=true}else if(event.data.address==="method"){const e=event.data;const t=this.ugens.get(e.object);t[e.name](...e.args.map(Gibberish.proxyReplace))}else if(event.data.address==="property"){const e=event.data;const t=this.ugens.get(e.object);t[e.name]=e.value}else if(event.data.address==="print"){const e=event.data;const t=this.ugens.get(e.object);console.log("printing",e.object,t)}else if(event.data.address==="set"){if(event.data.name==="Gibberish.ctx.sampleRate"){processor.sampleRate=event.data.value}else{const e=event.data;const t=this.ugens.get(e.object);t[e.name]=e.value}}}process(e,t,s){if(initialized===true){const e=Gibberish;const s=e.scheduler;let n=this.callback;let i=e.callbackUgens;this.messages.length=0;if(n===undefined&&e.graphIsDirty===false)return true;let a=e.blockCallbacks.length;if(a!==0){for(let t=0;t<a;t++){e.blockCallbacks[t]()}e.blockCallbacks.splice(0,a)}const r=t[0];const o=t[0][0].length;for(let t=0;t<o;++t){s.tick();if(e.graphIsDirty){const t=n;const s=i;this.callback=n=e.generateCallback();i=e.callbackUgens}const a=n.apply(null,i);r[0][t]=a[0];r[1][t]=a[1]}if(this.messages.length>0){this.port.postMessage({address:"state",messages:this.messages})}}return true}}window.Gibberish.workletProcessor=GibberishProcessor;registerProcessor("gibberish",window.Gibberish.workletProcessor);